(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{45:function(e,t,a){e.exports=a(74)},50:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(38),o=a.n(s),c=(a(50),a(2)),i=a(4),l=a(6),u=a(5),m=a(7),h=a(76),d=a(23),p=a(11),f=a(75),g=(a(36),a(53),a(54),function(){return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},r.a.createElement(f.a,{className:"navbar-brand",to:"/"},"\u041f\u0417\u041a\u0421-2"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(f.a,{className:"nav-link",activeClassName:"active",to:"/tasks"},"\u0413\u0440\u0430\u0444 \u0437\u0430\u0434\u0430\u0447 ",r.a.createElement("span",{className:"sr-only"},"(current)"))),r.a.createElement("li",{className:"nav-item"},r.a.createElement(f.a,{className:"nav-link",activeClassName:"active",to:"/cs"},"\u0413\u0440\u0430\u0444 \u043a\u043e\u043c\u043f'\u044e\u0442\u0435\u0440\u043d\u043e\u0457 \u0441\u0438\u0441\u0442\u0435\u043c\u0438")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(f.a,{exact:!0,className:"nav-link ",activeClassName:"active",to:"/model"},"\u041c\u043e\u0434\u0435\u043b\u044e\u0432\u0430\u043d\u043d\u044f")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(f.a,{exact:!0,className:"nav-link disabled",activeClassName:"active",to:"/stats"},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430")))))}),v=a(78),b=a(39),E=a(8),y=a(3),k=a(77),O=a(10),N=a(12),w=(a(59),1),j=2,S=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).locales={uk:{edit:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438",del:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u043e\u0431\u0440\u0430\u043d\u0435",back:"\u041d\u0430\u0437\u0430\u0434",addNode:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0432\u0435\u0440\u0448\u0438\u043d\u0443",addEdge:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0437\u0432'\u044f\u0437\u043e\u043a",editNode:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0432\u0435\u0440\u0448\u0438\u043d\u0443",editEdge:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0437\u0432'\u044f\u0437\u043e\u043a",addDescription:"\u041d\u0430\u0442\u0438\u0441\u043d\u0456\u0442\u044c \u043d\u0430 \u043f\u0443\u0441\u0442\u043e\u043c\u0443 \u043c\u0456\u0441\u0446\u0456 \u0430\u0431\u0438 \u0434\u043e\u0434\u0430\u0442\u0438 \u0432\u0435\u0440\u0448\u0438\u043d\u0443.",edgeDescription:"\u0410\u0431\u0438 \u0437'\u0454\u0434\u043d\u0430\u0442\u0438 \u0432\u0435\u0440\u0448\u0438\u043d\u0438 \u043a\u043b\u0456\u043a\u043d\u0456\u0442\u044c \u043f\u043e \u043f\u043e\u0447\u0430\u0442\u043a\u043e\u0432\u0456\u0439 \u0432\u0435\u0440\u0448\u0438\u043d\u0456 \u0442\u0430 \u043f\u043e \u043a\u0456\u043d\u0446\u0435\u0432\u0456\u0439.",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",createEdgeError:"Cannot link edges to a cluster.",deleteClusterError:"Clusters cannot be deleted.",editClusterError:"Clusters cannot be edited."}},a.params=function(e,t,n,r){var s="edit"===n,o="\u0437\u0432'\u044f\u0437\u043a\u0443"===r,c=a.state.data.nodes.map(function(e){return e.id}).sort(function(e,t){return t-e})[0],i=s?e.number:isNaN(c)?0:c+1,l=a.getWeight(r,s,e);if(l){var u="".concat(o?a.state.type===w?"":"".concat(l):a.state.type===w?"".concat(i):"".concat(i,"\n \u2014 \n").concat(l));e.number=i,e.weight=l,e.label=u,s||o||(e.id=i);try{return t(e)}catch(m){console.log(m)}}},a.onDoubleClick=function(e){var t=e.nodes,n=e.edges,r=a.state,s=r.data,o=s.nodes,c=s.edges;if(r.type!==w)if(t.length>0){var i=o.get(t[0]),l=a.getWeight("\u0432\u0435\u0440\u0448\u0438\u043d\u0438",!0,{weight:i.weight});if(!l)return;var u="".concat(i.id,"\n\u2014\n").concat(l);o.update(Object(N.a)({},i,{weight:l,label:u}))}else{var m=c.get(n[0]),h=a.getWeight("\u0437\u0432'\u044f\u0437\u043a\u0443",!0,{weight:m.weight});if(!h)return;var d="".concat(h);c.update(Object(N.a)({},m,{weight:h,label:d}))}},a.type="tasks"===e.name?j:w,a.network={},a.appRef=Object(n.createRef)(),a.options={locales:a.locales,locale:"uk",physics:{enabled:!1},manipulation:{enabled:void 0===a.props.manipulationActive||a.props.manipulationActive,initiallyActive:!0,addNode:function(e,t){a.params(e,t,"add","\u0432\u0435\u0440\u0448\u0438\u043d\u0438")},addEdge:function(e,t){a.params(e,t,"add","\u0437\u0432'\u044f\u0437\u043a\u0443")}},edges:{arrows:{to:{enabled:a.type===j}}}},a.state={data:e.data,type:a.type,manipulationActive:void 0===a.props.manipulationActive||a.props.manipulationActive},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"getWeight",value:function(e,t,a){if(this.state.type===w)return" ";var n=prompt("\u0412\u0430\u0433\u0430 ".concat(e),t?a.weight:"");return n?(n=parseInt(n),isNaN(n)?alert("\u041d\u0435\u0432\u0456\u0440\u043d\u0438\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0432\u0430\u0433\u0438 ".concat(e,"!")):n<=0?alert("\u0412\u0430\u0433\u0430 \u043d\u0435 \u043c\u043e\u0436\u0435 \u0431\u0443\u0442\u0438 \u043d\u0435\u0433\u0430\u0442\u0438\u0432\u043d\u043e\u044e \u0447\u0438 \u0434\u043e\u0440\u0456\u0432\u043d\u044e\u0432\u0430\u0442\u0438 0"):n):alert('"\u0412\u0430\u0433\u0443 '.concat(e,' \u043d\u0435 \u0437\u0430\u0434\u0430\u043d\u043e!"'))}},{key:"getSnapshotBeforeUpdate",value:function(e,t){return e.data!==this.props.data}},{key:"componentDidMount",value:function(){var e=this;this.network=new O.Network(this.appRef.current,this.props.data,this.options),this.state.type===j&&this.state.manipulationActive&&this.network.on("doubleClick",function(t){return e.onDoubleClick(t)}),this.setState({data:{nodes:this.network.body.data.nodes,edges:this.network.body.data.edges}})}},{key:"componentDidUpdate",value:function(e,t,a){var n=this;a&&(this.network=new O.Network(this.appRef.current,this.props.data,this.options),this.state.type===j&&this.state.manipulationActive&&this.network.on("doubleClick",function(e){return n.onDoubleClick(e)}),this.setState({data:{nodes:this.network.body.data.nodes,edges:this.network.body.data.edges}}))}},{key:"render",value:function(){var e=this.props,t=e.height,a=e.width;return r.a.createElement("div",{className:"my-3",style:{height:t||"600px",width:a||"100%"},ref:this.appRef})}}]),t}(n.Component),x=function(e){var t=e.type,a=e.message;return r.a.createElement("div",{className:"alert ".concat("error"===t?"alert-danger":"alert-info")},a)},C=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={vertexNumb:5,maxWeight:10,minWeight:1,correlation:.5},a.handleChange=function(e){a.setState(Object(y.a)({},e.target.name,e.target.value))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.vertexNumb,n=t.maxWeight,s=t.minWeight,o=t.correlation;return r.a.createElement("div",{className:"my-4"},r.a.createElement("h4",null,"\u0413\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440 \u0433\u0440\u0430\u0444\u0443 \u0437\u0430\u0434\u0430\u0447"),r.a.createElement("form",{className:"py-4"},r.a.createElement("div",{className:"input-group mb-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("div",{className:"input-group-text"},"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u0432\u0435\u0440\u0448\u0438\u043d (\u0437\u0430\u0434\u0430\u0447): ")),r.a.createElement("input",{type:"number",className:"form-control",autoComplete:"off",name:"vertexNumb",value:a,onChange:this.handleChange})),r.a.createElement("div",{className:"input-group mb-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("div",{className:"input-group-text"},"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430 \u0432\u0430\u0433\u0430 \u0432\u0435\u0440\u0448\u0438\u043d\u0438: ")),r.a.createElement("input",{type:"number",className:"form-control",name:"maxWeight",min:"1",autoComplete:"off",value:n,onChange:this.handleChange})),r.a.createElement("div",{className:"input-group mb-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("div",{className:"input-group-text"},"\u041c\u0456\u043d\u0456\u043c\u0430\u043b\u044c\u043d\u0430 \u0432\u0430\u0433\u0430 \u0432\u0435\u0440\u0448\u0438\u043d\u0438: ")),r.a.createElement("input",{type:"number",className:"form-control",min:"1",autoComplete:"off",name:"minWeight",value:s,onChange:this.handleChange})),r.a.createElement("div",{className:"input-group mb-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("div",{className:"input-group-text"},"\u0417\u0432'\u044f\u0437\u043d\u0456\u0441\u0442\u044c: ")),r.a.createElement("input",{type:"number",className:"form-control",autoComplete:"off",step:"0.01",min:"0",max:"1",name:"correlation",value:o,onChange:this.handleChange})),r.a.createElement("button",{className:"btn btn-primary float-right",onClick:function(t){return e.props.onGenerate(t,e.state)}},"\u0417\u0433\u0435\u043d\u0435\u0440\u0443\u0432\u0430\u0442\u0438")))}}]),t}(n.Component),_=function(){return"_"+Math.random().toString(36).substr(2,9)},D=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={graphName:"",data:{edges:new O.DataSet,nodes:new O.DataSet}},a.handleChange=function(e){"showJson"!==e.target.name?a.setState(Object(y.a)({},e.target.name,e.target.value)):a.setState(Object(y.a)({},e.target.name,!a.state.showJson||!a.state.showJson))},a.handleSubmit=function(e){var t=a.props,n=t.history,r=t.id,s=t.name;if(e.preventDefault(),a.graphToMatrix(),"cs"!==s&&a.isCyclic())a.setState({error:"\u0426\u0438\u043a\u043b\u0456\u0447\u043d\u0438\u0439 \u0433\u0440\u0430\u0444!"});else if("tasks"!==s&&a.isConnected())a.setState({error:"\u0413\u0440\u0430\u0444 \u043d\u0435\u0437\u0432'\u044f\u0437\u043d\u0438\u0439!"});else{var o=a.state.data,c=o.nodes,i=o.edges,l={nodes:c=c._data?Object.values(c._data):[],edges:i=i._data?Object.values(i._data):[]},u=a.state.graphName,m=localStorage.getItem("".concat(s));m=m?JSON.parse(m):[];var h={};r&&(h=m.filter(function(e){return e.id===r})[0]);var d={name:u||"\u0411\u0435\u0437 \u0456\u043c\u0435\u043d\u0456 ".concat(m.length),data:l,id:r?h.id:_(),created:r?h.created:new Date,updated:new Date};r?m=[].concat(Object(E.a)(m.filter(function(e){return e.id!==r})),[d]):m.push(d),localStorage.setItem("".concat(s),JSON.stringify(m));var p=new URLSearchParams(window.location.search),f=p.has("next")?p.get("next"):null;console.log(f),n.push("".concat(f||"/".concat(s)))}},a.handleGenerate=function(e,t){e.preventDefault();var n=t.vertexNumb,r=t.maxWeight,s=t.minWeight,o=t.correlation;a.generate(n,r,s,o)},a.generate=function(e,t,n,r){for(var s=a.state.data,o=s.edges,c=s.nodes,i=[],l=0;l<e;l++){var u=a._getRandomInt(n,t);i.push({id:l,number:l,weight:u,label:"".concat(l,"\n\u2014\n").concat(u),x:a._getRandomInt(-500,500),y:a._getRandomInt(-500,500)})}for(var m=i.reduce(function(e,t){return e+t.weight},0),h=Math.round(m*(1-r)/r),d=[],p=[],f=0;f<e;f++)p.push(0);for(var g=0;g<e;g++)d.push(p.slice());for(var v=0;v<h;){var b=a._getRandomInt(0,e-1),E=a._getRandomInt(0,e-1);if(b===E&&(E=b+1),d[E][b]>0){var y=b;b=E,E=y}d[b][E]+=1,v+=1}var k=[];d.forEach(function(e,t){e.forEach(function(e,a){e>0&&k.push({from:t,to:a,weight:e,label:"".concat(e)})})}),c.clear(),o.clear(),c.add(i),o.add(k),a.graphToMatrix();for(var O=a.isCyclic();O;)o.forEach(function(e){if(console.log("".concat(JSON.stringify(e),", cycle: ").concat(JSON.stringify(O)," ").concat(e.from===O.from&&e.to===O.to)),e.from===O.from&&e.to===O.to){var t=e.weight;o.remove(e.id);var n=o.getIds(),r=n[a._getRandomInt(0,n.length)];console.log(o.get(r));var s=o.get(r);return o.update({id:r,weight:s.weight+t,label:"".concat(s.weight+t)}),console.log(o.get(r)),a.graphToMatrix(),void(O=a.isCyclic())}});a.setState({generated:!0,nodesWeightSum:m,edgesWeightSum:v})},a._getRandomInt=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e},a.errorRef=r.a.createRef(),a.graphRef=r.a.createRef(),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.id,a=e.name;if(t){var n=localStorage.getItem("".concat(a));if(n){var r=(n=JSON.parse(n)).filter(function(e){return e.id===t})[0],s=r.data,o=s.edges,c=s.nodes,i={edges:new O.DataSet(o),nodes:new O.DataSet(c)};this.setState({graphName:r.name,data:i})}}}},{key:"componentDidUpdate",value:function(e,t){this.state.error&&window.scrollTo(0,this.errorRef.current.offsetTop),this.state.generated&&window.scrollTo(0,this.graphRef.current.offsetTop)}},{key:"isConnected",value:function(){var e=this.state.data,t=e.nodes,a=e.edges,n={},r={};for(var s in t.forEach(function(e){n[e.id]=[]}),a.forEach(function(e){n[e.from].push(e.to),n[e.to].push(e.from)}),n)r[s]||(r[s]={}),n[s].forEach(function(e){r[s][e]=1,r[e]||(r[e]={}),r[e][s]=1});for(var o=!1,c=0;c<t.length;c++){var i=t.get(c);if(i){var l=this.isConnectedUtil(i.id,r);if(Object.keys(l).length!==Object.keys(r).length){o=!0;break}}}return o}},{key:"isConnectedUtil",value:function(e,t){var a={};for(a[e]=[],a[e].dist=0;;){var n=null,r=null,s=1/0;for(var o in a)if(a[o]){var c=a[o].dist,i=t[o];for(var l in i)if(!a[l]){var u=i[l]+c;u<s&&(n=a[o],r=l,s=u)}}if(s===1/0)break;a[r]=n.concat(r),a[r].dist=s}return a}},{key:"graphToMatrix",value:function(){var e=this,t=this.state.data,a=t.nodes,n=t.edges;this.matrix={},a.forEach(function(t){e.matrix[t.id]=[]}),n.forEach(function(t){e.matrix[t.from].push(t.to)})}},{key:"isCyclic",value:function(){for(var e=Object.keys(this.matrix),t={},a={},n=0;n<e.length;n++){var r=e[n],s=this.cyclicUtil(r,t,a);if(-1!==s)return{from:parseInt(r),to:s}}return!1}},{key:"cyclicUtil",value:function(e,t,a){if(!t[e]){t[e]=!0,a[e]=!0;for(var n=this.matrix[e],r=0;r<n.length;r++){var s=n[r];if(!t[s]&&-1!==this.cyclicUtil(s,t,a))return s;if(a[s])return s}}return a[e]=!1,-1}},{key:"render",value:function(){var e=this,t=this.state,a=t.graphName,n=t.data,s=t.error,o=t.edgesWeightSum,c=t.nodesWeightSum,i=t.generated,l=t.showJson,u=this.props,m=u.name,h=u.id;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"my-4"},r.a.createElement("h4",{className:"my-4"},"\u0420\u0435\u0434\u0430\u043a\u0442\u043e\u0440 \u0433\u0440\u0430\u0444\u0443"),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group",ref:this.errorRef},r.a.createElement("input",{name:"graphName",autoComplete:"off",required:!0,value:a,onChange:this.handleChange,className:"form-control",placeholder:"\u041d\u0430\u0437\u0432\u0430 \u0433\u0440\u0430\u0444\u0443"})),s&&r.a.createElement(x,{type:"error",message:s}),r.a.createElement(S,{data:n,name:this.props.name,ref:this.graphRef}),i&&r.a.createElement("div",null,"\u0421\u0443\u043c\u0430\u0440\u043d\u0430 \u0432\u0430\u0433\u0430 \u0432\u0435\u0440\u0448\u0438\u043d \u0433\u0440\u0430\u0444\u0443: ".concat(c,", c\u0443\u043c\u0430\u0440\u043d\u0430 \u0432\u0430\u0433\u0430 \u0434\u0443\u0433 \u0433\u0440\u0430\u0444\u0443: ").concat(o)),h&&r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",onChange:this.handleChange,id:"json",name:"showJson"}),r.a.createElement("label",{className:"form-check-label",htmlFor:"json"},"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u0438 JSON")),l&&r.a.createElement("textarea",{className:"form-control",disabled:!0,rows:"3"},JSON.stringify(JSON.parse(localStorage.getItem(m)).filter(function(e){return e.id===h})[0])),r.a.createElement("input",{type:"submit",onClick:this.handleSubmit,className:"btn btn-primary float-right",value:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"}))),"tasks"===m&&!h&&r.a.createElement(C,{onGenerate:function(t,a){return e.handleGenerate(t,a)}}))}}]),t}(n.Component),T=Object(k.a)(D),I=a(34),M=a(15),A=function(e){var t=e.item,a=e.index,n=e.onDelete,s=e.onClone,o=e.name;return r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},a+1),r.a.createElement("td",null,r.a.createElement(I.a,{to:"/".concat(o,"/").concat(t.id)},t.name?t.name:"\u0411\u0435\u0437 \u0456\u043c\u0435\u043d\u0456")),r.a.createElement("td",null,new Date(t.created).toLocaleString("uk-UA",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),r.a.createElement("td",null,new Date(t.updated).toLocaleString("uk-UA",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),r.a.createElement("td",null,r.a.createElement("div",{className:"btn-group",role:"group"},"tasks"===o&&r.a.createElement(I.a,{to:"/tasks/".concat(t.id,"/queue"),className:"btn btn-primary btn-sm",title:"\u0421\u0444\u043e\u0440\u043c\u0443\u0432\u0430\u0442\u0438 \u0447\u0435\u0440\u0433\u0443"},r.a.createElement(M.a,{icon:p.e})),r.a.createElement(I.a,{to:"/".concat(o,"/").concat(t.id),className:"btn btn-primary btn-sm",title:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438"},r.a.createElement(M.a,{icon:p.c})),r.a.createElement("button",{type:"button",className:"btn btn-info btn-sm",onClick:function(){return s(t.id)},title:"\u041a\u043b\u043e\u043d\u0443\u0432\u0430\u0442\u0438"},r.a.createElement(M.a,{icon:p.a})),r.a.createElement("button",{type:"button",className:"btn btn-danger btn-sm",onClick:function(){return n(t.id)},title:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"},r.a.createElement(M.a,{icon:p.f})))))},F=function(e){var t=e.list,a=e.onDelete,n=e.onClone,s=e.name;if(!t||t.length<1)return r.a.createElement("h6",{className:"text-center my-2 text-secondary"},"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0443\u0441\u0442\u0438\u0439");var o=t.sort(function(e,t){return new Date(t.created)-new Date(e.created)}).map(function(e,t){return r.a.createElement(A,{key:e.id,item:e,index:t,onDelete:a,onClone:n,name:s})});return r.a.createElement(r.a.Fragment,null,r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"10%"}},"#"),r.a.createElement("th",{style:{width:"30%"}},"\u0406\u043c'\u044f"),r.a.createElement("th",{style:{width:"25%"}},"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043e"),r.a.createElement("th",{style:{width:"25%"}},"\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043e"),r.a.createElement("th",{style:{width:"10%"}},"\u041e\u043f\u0435\u0440\u0430\u0446\u0456\u0457"))),r.a.createElement("tbody",null,o)))},J=function(){return"_"+Math.random().toString(36).substr(2,9)},R=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},a.handleDelete=function(e){if(window.confirm("\u0414\u0456\u0439\u0441\u043d\u043e \u0431\u0430\u0436\u0430\u0454\u0442\u0435 \u0432\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0433\u0440\u0430\u0444?")){var t=a._getGraphs();t=t.filter(function(t){return t.id!==e}),localStorage.setItem(a.props.name,JSON.stringify(t)),a.setState({graphs:t})}},a.handleClone=function(e){var t=a._getGraphs(),n=Object(N.a)({},t.filter(function(t){return t.id===e})[0]);n.name="".concat(n.name," - \u043a\u043e\u043f\u0456\u044f"),n.id=J();var r=new Date;n.created=r,n.updated=r,t=[].concat(Object(E.a)(t),[n]),localStorage.setItem(a.props.name,JSON.stringify(t)),a.setState({graphs:t})},a.handleDeleteAll=function(){window.confirm("\u0412\u0438 \u0441\u043f\u0440\u0430\u0432\u0434\u0456 \u0431\u0430\u0436\u0430\u0454\u0442\u0435 \u0432\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0432\u0441\u0456 \u0433\u0440\u0430\u0444\u0438?")&&(localStorage.setItem(a.props.name,[]),a.setState({graphs:localStorage.getItem(a.props.name)}))},a.handleNew=function(){a.setState({view:{showModal:!0}})},a._getGraphs=function(){var e=localStorage.getItem(a.props.name);if(e)return e=JSON.parse(e)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){if(this.props.name){var e=localStorage.getItem(this.props.name);if(!e)return this.setState({graphs:[]});this.setState({graphs:JSON.parse(e)})}}},{key:"render",value:function(){var e=this.state.graphs,t=this.props.name;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",{className:"my-4"},this.props.title,r.a.createElement("div",{className:"float-right btn-group"},r.a.createElement(I.a,{to:"/".concat(t,"/new"),className:"btn btn-primary"},r.a.createElement(M.a,{icon:p.d})),r.a.createElement("button",{className:"btn btn-danger",onClick:this.handleDeleteAll},r.a.createElement(M.a,{icon:p.g})))),r.a.createElement(F,{name:t,list:e,onDelete:this.handleDelete,onClone:this.handleClone}))}}]),t}(n.Component),G=function(){return r.a.createElement("div",{className:"jumbotron"},r.a.createElement("h4",{className:"h4"},"\u041f\u0440\u043e\u0433\u0440\u0430\u043c\u043d\u0435 \u0437\u0430\u0431\u0435\u0437\u043f\u0435\u0447\u0435\u043d\u043d\u044f \u043a\u043e\u043c\u043f'\u044e\u0442\u0435\u0440\u043d\u0438\u0445 \u0441\u0438\u0441\u0442\u0435\u043c-2"),r.a.createElement("hr",null),r.a.createElement("p",{className:"lead"},r.a.createElement("b",null,"\u0412\u0438\u043a\u043e\u043d\u0430\u0432:"),r.a.createElement("br",null)," \u0441\u0442\u0443\u0434\u0435\u043d\u0442 \u0433\u0440\u0443\u043f\u0438 \u0406\u041e-82\u043c\u043f ",r.a.createElement("br",null)," \u0411\u0430\u0440\u0430\u0431\u0430\u0448 \u0422.\u0410."),r.a.createElement(I.a,{to:"/tasks",className:"btn btn-primary float-right"},"\u041f\u043e\u0447\u0430\u0442\u0438 \u0440\u043e\u0431\u043e\u0442\u0443"))};function P(e){var t=e.edge,a=e.path;return function(e,t){var a,n=[];for(a=0;a<e.length;a++)e[a]===t&&n.push(a);return n}(a,t.from).some(function(e){return a[e+1]===t.to})}var W=function(e){var t=e.graph,a=void 0===t?[]:t,n=e.from,r=e.to,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=function(e){var t=new Map;return function(){var a=JSON.stringify(arguments),n=t.get(a);return n||(n=e.apply(this,arguments),t.set(a,n),n)}}(function(e,t){return e.reduce(function(e,a){return a[0]===t&&e.push(a[1]),e},[])}.bind(null,a));return function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];s.push(t);var r=!0,c=!1,i=void 0;try{for(var l,u=o(t)[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var m=l.value;if(m!==a)P({edge:{from:t,to:m},path:s})||e(m,a,n);else{var h=s.slice();h.push(a),n.push(h)}}}catch(d){c=!0,i=d}finally{try{r||null==u.return||u.return()}finally{if(c)throw i}}return s.pop(),n}(n,r)},L=function(){function e(t,a){Object(c.a)(this,e),this._method=t,this._data=a}return Object(i.a)(e,[{key:"run",value:function(){var e;switch(this._method){case 1:e=this._run1();break;case 2:e=this._run2();break;case 11:e=this._run11();break;default:throw new Error("Unsupported algo")}return e}},{key:"_toMatrix",value:function(e){var t=this._data,a=t.nodes,n=t.edges,r=[];return n.forEach(function(t){e?r[t.to]=Object(N.a)({},r[t.to],Object(y.a)({},t.from,a.get(t.from).weight)):r[t.from]=Object(N.a)({},r[t.from],Object(y.a)({},t.to,a.get(t.to).weight))}),r}},{key:"_toEdgesArray",value:function(e){var t=this._data.edges,a=[];return t.forEach(function(t){a.push(e?[t.to,t.from]:[t.from,t.to])}),a}},{key:"_toUndirectedMatrix",value:function(){var e=this._data,t=e.nodes,a=e.edges,n=[];return a.forEach(function(e){n[e.to]=Object(N.a)({},n[e.to],Object(y.a)({},e.from,t.get(e.from).weight)),n[e.from]=Object(N.a)({},n[e.from],Object(y.a)({},e.to,t.get(e.to).weight))}),n}},{key:"_getPaths",value:function(e,t,a){return W({graph:this._toEdgesArray(a),from:e,to:t})}},{key:"_BFS",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=this._data.nodes,n=Object.keys(a._data),r=Object.keys(this._toMatrix(t)),s=n.filter(function(e){return!r.includes(e)}),o={},c={};return r.forEach(function(n){n=parseInt(n);var r=0,i=[];s.forEach(function(s){s=parseInt(s),e._getPaths(n,s,t).forEach(function(e){var s=e.reduce(function(e,t){return e+a.get(t).weight},t?-a.get(n).weight:0);r<s&&(r=s,i=e)}),o[s]=t?0:a.get(s).weight,c[s]=[s]}),o[n]=r,c[n]=i}),{weights:o,maxPaths:c}}},{key:"_run2",value:function(){for(var e=this._data.nodes,t=this._BFS().weights,a=[],n=0;n<e.length;n++){var r=t[n];a.push({number:n,value:r,names:["T\u043a\u0440.\u043a."]})}return a.sort(function(e,t){return t.value-e.value})}},{key:"_run1",value:function(){for(var e=this._data.nodes,t=this._BFS(),a=t.weights,n=t.maxPaths,r=Math.max.apply(Math,Object(E.a)(Object.values(a))),s=Object.values(n).map(function(e){return e.length}),o=Math.max.apply(Math,Object(E.a)(s)),c=[],i=0;i<e.length;i++){var l=a[i]/r+s[i]/o;c.push({number:i,value:l,names:["Pr"]})}return c.sort(function(e,t){return t.value-e.value})}},{key:"_run11",value:function(){var e=this._toUndirectedMatrix(),t=this._data.nodes,a=Object.keys(t._data),n=this._BFS(!0).weights;return a.map(function(t){return{number:t,value:e[t]?Object.keys(e[t]).length:0,weights:n[t],names:["Sv","T\u043a\u0440.\u043f\u043e\u0447."]}}).sort(function(e,t){return e.value===t.value?e.weights-t.weights:t.value-e.value})}}]),e}(),q=function(e){var t=e.data;return r.a.createElement("table",{className:"table my-4"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"\u041d\u043e\u043c\u0435\u0440 \u0443 \u0447\u0435\u0440\u0437\u0456"),r.a.createElement("th",null,"\u041d\u043e\u043c\u0435\u0440 \u0432\u0435\u0440\u0448\u0438\u043d\u0438"),r.a.createElement("th",null,"\u041f\u043e\u043a\u0430\u0437\u043d\u0438\u043a"))),r.a.createElement("tbody",null,t.map(function(e,t){return console.log(e),r.a.createElement("tr",{key:t,"data-item":e},r.a.createElement("td",null,t+1),r.a.createElement("td",null,e.number),r.a.createElement("td",null,1===e.names.length?"".concat(e.names," = ").concat(e.value.toFixed(2)):"".concat(e.names[0]," = ").concat(e.value,", ").concat(e.names[1]," = ").concat(e.weights)))})))},B=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleOptionChange=function(e){var t=parseInt(e.target.value);a.setState({algo:t});var n=new L(t,a.props.data).run();window.scrollTo(0,a.resultsRef.current.offsetTop),a.setState({results:n})},a.resultsRef=Object(n.createRef)(),a.state={data:e.data,results:[],algo:-1,description:{1:"\u0423 \u043f\u043e\u0440\u044f\u0434\u043a\u0443 \u0441\u043f\u0430\u0434\u0430\u043d\u043d\u044f \u043f\u0440\u043e\u043d\u043e\u0440\u043c\u043e\u0432\u0430\u043d\u043e\u0457 \u0441\u0443\u043c\u0438 \u043a\u0440\u0438\u0442\u0438\u0447\u043d\u0438\u0445 \u043f\u043e \u0447\u0430\u0441\u0443 \u0456 \u043f\u043e \u043a\u0456\u043b\u044c\u043a\u043e\u0441\u0442\u0456 \u0432\u0435\u0440\u0448\u0438\u043d \u0448\u043b\u044f\u0445\u0456\u0432 \u0434\u043e \u043a\u0456\u043d\u0446\u044f \u0433\u0440\u0430\u0444\u0430 \u0437\u0430\u0434\u0430\u0447\u0456.",2:"\u0423 \u043f\u043e\u0440\u044f\u0434\u043a\u0443 \u0441\u043f\u0430\u0434\u0430\u043d\u043d\u044f \u043a\u0440\u0438\u0442\u0438\u0447\u043d\u043e\u0433\u043e \u0447\u0430\u0441\u0443 \u0434\u043e \u043a\u0456\u043d\u0446\u044f \u0433\u0440\u0430\u0444\u0443",11:"\u0423 \u043f\u043e\u0440\u044f\u0434\u043a\u0443 \u0441\u043f\u0430\u0434\u0430\u043d\u043d\u044f \u0437\u0432\u2019\u044f\u0437\u043d\u043e\u0441\u0442\u0456 \u0432\u0435\u0440\u0448\u0438\u043d, \u0430 \u043f\u0440\u0438 \u0440\u0456\u0432\u043d\u0438\u0445 \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f\u0445\n              \u2013 \u0432 \u043f\u043e\u0440\u044f\u0434\u043a\u0443 \u0437\u0440\u043e\u0441\u0442\u0430\u043d\u043d\u044f \u043a\u0440\u0438\u0442\u0438\u0447\u043d\u043e\u0433\u043e \u043f\u043e \u0447\u0430\u0441\u0443 \u0448\u043b\u044f\u0445\u0456\u0432 \u0432\u0456\u0434 \u043f\u043e\u0447\u0430\u0442\u043a\u0443 \u0433\u0440\u0430\u0444\u0430\n              \u0437\u0430\u0434\u0430\u0447\u0456. "}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(e,t){this.state.results.length>0&&window.scrollTo(0,this.resultsRef.current.offsetTop)}},{key:"render",value:function(){var e=this.state,t=e.results,a=e.algo,n=e.description;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"algo"},r.a.createElement("h5",null,"\u0410\u043b\u0433\u043e\u0440\u0438\u0442\u043c: ")),r.a.createElement("select",{className:"custom-select",name:"algo",value:a,onChange:this.handleOptionChange},r.a.createElement("option",{value:"-1",disabled:!0},"\u041e\u0431\u0440\u0430\u0442\u0438"),Object.keys(n).map(function(e){return r.a.createElement("option",{value:e,key:e},e)}))),r.a.createElement("div",{ref:this.resultsRef},a>0&&r.a.createElement("div",null,r.a.createElement("h5",null,"\u041e\u043f\u0438\u0441 \u0430\u043b\u0433\u043e\u0440\u0438\u0442\u043c\u0443: "),n[a],r.a.createElement("h5",{className:"my-2"},"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442: "),r.a.createElement(q,{data:t}))))}}]),t}(n.Component),U=function(e){function t(e){var a;Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={};var n=e.id,r=localStorage.getItem("tasks");if(!r)return Object(l.a)(a);var s=(r=JSON.parse(r)).filter(function(e){return e.id===n})[0].data,o=s.edges,i=s.nodes,m={edges:new O.DataSet(o),nodes:new O.DataSet(i)};return a.state.data=m,a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.data,t=this.props.id;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"\u0424\u043e\u0440\u043c\u0443\u0432\u0430\u043d\u043d\u044f \u0447\u0435\u0440\u0433\u0438 \u0437\u0430\u0434\u0430\u0447",r.a.createElement("div",{className:"float-right btn-group"},r.a.createElement(I.a,{to:"/tasks/".concat(t,"?next=").concat(window.location.pathname),className:"btn btn-primary"},"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0433\u0440\u0430\u0444"))),r.a.createElement(S,{name:"tasks",data:e,manipulationActive:!1}),r.a.createElement(B,{data:e}))}}]),t}(n.Component),z=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={},e.csGraphRef=r.a.createRef(),e.tasksGraphRef=r.a.createRef(),e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"renderGraphList",value:function(e){var t=this.props.getGraphs(e);return t?t.map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}):r.a.createElement("option",{disabled:!0},"\u0412\u0456\u0434\u0441\u0443\u0442\u043d\u0456 \u0433\u0440\u0430\u0444\u0438")}},{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit,className:"p-2"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"h6",htmlFor:"queue"},"\u0410\u043b\u0433\u043e\u0440\u0438\u0442\u043c \u0444\u043e\u0440\u043c\u0443\u0432\u0430\u043d\u043d\u044f \u0447\u0435\u0440\u0433\u0438 \u0437\u0430\u0434\u0430\u0447:"),r.a.createElement("select",{name:"queue",id:"queue",value:this.props.queue,className:"form-control",onChange:this.props.handleChange},r.a.createElement("option",{value:"-1",disabled:!0},"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0447\u0435\u0440\u0433\u0443"),r.a.createElement("option",{value:"1"},"1 - \u0423 \u043f\u043e\u0440\u044f\u0434\u043a\u0443 \u0441\u043f\u0430\u0434\u0430\u043d\u043d\u044f \u043f\u0440\u043e\u043d\u043e\u0440\u043c\u043e\u0432\u0430\u043d\u043e\u0457 \u0441\u0443\u043c\u0438 \u043a\u0440\u0438\u0442\u0438\u0447\u043d\u0438\u0445 \u043f\u043e \u0447\u0430\u0441\u0443 \u0456 \u043f\u043e \u043a\u0456\u043b\u044c\u043a\u043e\u0441\u0442\u0456 \u0432\u0435\u0440\u0448\u0438\u043d \u0448\u043b\u044f\u0445\u0456\u0432 \u0434\u043e \u043a\u0456\u043d\u0446\u044f \u0433\u0440\u0430\u0444\u0430 \u0437\u0430\u0434\u0430\u0447\u0456."),r.a.createElement("option",{value:"11"},"11 - \u0423 \u043f\u043e\u0440\u044f\u0434\u043a\u0443 \u0441\u043f\u0430\u0434\u0430\u043d\u043d\u044f \u0437\u0432\u2019\u044f\u0437\u043d\u043e\u0441\u0442\u0456 \u0432\u0435\u0440\u0448\u0438\u043d, \u0430 \u043f\u0440\u0438 \u0440\u0456\u0432\u043d\u0438\u0445 \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f\u0445 \u2013 \u0432 \u043f\u043e\u0440\u044f\u0434\u043a\u0443 \u0437\u0440\u043e\u0441\u0442\u0430\u043d\u043d\u044f \u043a\u0440\u0438\u0442\u0438\u0447\u043d\u043e\u0433\u043e \u043f\u043e \u0447\u0430\u0441\u0443 \u0448\u043b\u044f\u0445\u0456\u0432 \u0432\u0456\u0434 \u043f\u043e\u0447\u0430\u0442\u043a\u0443 \u0433\u0440\u0430\u0444\u0430 \u0437\u0430\u0434\u0430\u0447\u0456."))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"h6",htmlFor:"assignmentAlgo"},"\u0410\u043b\u0433\u043e\u0440\u0438\u0442\u043c \u043f\u0440\u0438\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f:"),r.a.createElement("select",{name:"assignmentAlgo",id:"assignmentAlgo",value:this.props.assignmentAlgo,className:"form-control",onChange:this.props.handleChange},r.a.createElement("option",{value:"-1",disabled:!0},"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0430\u043b\u0433\u043e\u0440\u0438\u0442\u043c"),r.a.createElement("option",{value:"2"},"2 - \u041f\u0440\u0438\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f \u043d\u0430 \u043f\u0435\u0440\u0448\u0438\u0439 \u043f\u0440\u043e\u0446\u0435\u0441\u043e\u0440,\u0449\u043e \u0437\u0432\u0456\u043b\u044c\u043d\u0438\u0432\u0441\u044f. \u0423 \u0446\u044c\u043e\u043c\u0443 \u0432\u0438\u043f\u0430\u0434\u043a\u0443, \u043f\u0440\u0438 \u043f\u0440\u0438\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u0456, \u0437 \u0432\u0456\u043b\u044c\u043d\u0438\u0445 \u043f\u0440\u043e\u0446\u0435\u0441\u043e\u0440\u0456\u0432 \u0432\u0438\u0431\u0438\u0440\u0430\u0454\u0442\u044c\u0441\u044f \u0442\u043e\u0439, \u044f\u043a\u0438\u0439 \u0437\u0432\u0456\u043b\u044c\u043d\u0438\u0432\u0441\u044f \u0456 \u043f\u0440\u043e\u0441\u0442\u043e\u044e\u0454 \u0434\u043e\u0432\u0448\u0435 \u0437\u0430 \u0456\u043d\u0448\u0438\u0445."),r.a.createElement("option",{value:"6",disabled:!0},"6 - \u0410\u043b\u0433\u043e\u0440\u0438\u0442\u043c \xab\u0441\u0443\u0441\u0456\u0434\u043d\u044c\u043e\u0433\u043e\xbb \u043f\u0440\u0438\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f \u0437 \u0432\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u043d\u043d\u044f\u043c \u043c\u043e\u0434\u0435\u043b\u044e\u0432\u0430\u043d\u043d\u044f \u0434\u043b\u044f \u0432\u0438\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f \u043f\u043e\u0447\u0430\u0442\u043a\u043e\u0432\u043e\u0433\u043e \u0447\u0430\u0441\u0443 \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u043d\u044f \u043e\u0431\u0447\u0438\u0441\u043b\u044e\u0432\u0430\u043b\u044c\u043d\u0438\u0445 \u0440\u043e\u0431\u0456\u0442."))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"h6",htmlFor:"connectionType"},"\u0422\u0438\u043f \u0437'\u0454\u0434\u043d\u0430\u043d\u043d\u044f:"),r.a.createElement("select",{name:"connectionType",id:"connectionType",value:this.props.connectionType,className:"form-control",onChange:this.props.handleChange},r.a.createElement("option",{value:"-1",disabled:!0},"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0442\u0438\u043f \u0437'\u0454\u0434\u043d\u0430\u043d\u043d\u044f"),r.a.createElement("option",{value:"1"},"\u0414\u0443\u043f\u043b\u0435\u043a\u0441\u043d\u0435"),r.a.createElement("option",{value:"2"},"\u041d\u0430\u043f\u0456\u0432\u0434\u0443\u043f\u043b\u0435\u043a\u0441\u043d\u0435"))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"col"},r.a.createElement("div",null,r.a.createElement("label",{className:"h6",htmlFor:"tasks"},"\u0413\u0440\u0430\u0444 \u0437\u0430\u0434\u0430\u0447:"),r.a.createElement("div",{className:"float-right"},r.a.createElement(I.a,{className:"badge badge-light",to:"/tasks/new?next=/model"},r.a.createElement(M.a,{icon:p.d})),-1!==this.props.tasks&&r.a.createElement(I.a,{to:"/tasks/".concat(this.props.tasks,"?next=/model"),className:"badge badge-light",alt:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u043e\u0431\u0440\u0430\u043d\u0438\u0439 \u0433\u0440\u0430\u0444"},r.a.createElement(M.a,{icon:p.c})))),r.a.createElement("select",{name:"tasks",id:"tasks",value:this.props.tasks,className:"form-control",onChange:this.props.handleChangeGraph},r.a.createElement("option",{value:"-1",disabled:!0},"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0433\u0440\u0430\u0444 \u0437\u0430\u0434\u0430\u0447"),this.renderGraphList("tasks")),-1!==this.props.tasks&&r.a.createElement(S,{manipulationActive:!1,height:"300px",name:"tasks",data:this.props.tasksData,ref:this.tasksGraphRef})),r.a.createElement("div",{className:"col"},r.a.createElement("label",{className:"h6",htmlFor:"cs"},"\u0413\u0440\u0430\u0444 \u043a\u043e\u043c\u043f'\u044e\u0442\u0435\u0440\u043d\u043e\u0457 \u0441\u0438\u0441\u0442\u0435\u043c\u0438:"),r.a.createElement("div",{className:"float-right"},r.a.createElement(I.a,{to:"/cs/new?next=/model",className:"badge badge-light"},r.a.createElement(M.a,{icon:p.d})),-1!==this.props.cs&&r.a.createElement(I.a,{to:"/cs/".concat(this.props.cs,"?next=/model"),className:"badge badge-light",alt:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u043e\u0431\u0440\u0430\u043d\u0438\u0439 \u0433\u0440\u0430\u0444"},r.a.createElement(M.a,{icon:p.c}))),r.a.createElement("select",{value:this.props.cs,name:"cs",id:"cs",className:"form-control",onChange:this.props.handleChangeGraph},r.a.createElement("option",{value:"-1",disabled:!0},"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0433\u0440\u0430\u0444 \u043a\u043e\u043c\u043f'\u044e\u0442\u0435\u0440\u043d\u043e\u0457 \u0441\u0438\u0441\u0442\u0435\u043c\u0438"),this.renderGraphList("cs")),-1!==this.props.cs&&r.a.createElement(S,{height:"300px",manipulationActive:!1,name:"cs",data:this.props.csData,ref:this.csGraphRef}))))}}]),t}(n.Component),Q=a(44),V=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),t}(Object(Q.a)(Error)),Y=a(42),$=a.n(Y),H=1,K=2,X=3,Z=4,ee=101,te=102,ae=1,ne=function(){function e(t,a,n,r,s){var o=this;Object(c.a)(this,e),this._getColorArray=function(){var e={};return o.tasksData.nodes.forEach(function(t){return e[t.id]=$.a.getColor()}),e},this._formDependecies=function(){var e=o.tasksData.nodes,t=o.tasksData.edges,a={};return e.forEach(function(e){a[e.id]={parents:{},weight:e.weight}}),t.forEach(function(e){a[e.to].parents=Object(N.a)({},a[e.to].parents,Object(y.a)({},e.from,e.weight))}),Object.keys(a).forEach(function(e){0===Object.keys(a[e].parents).length&&(a[e].status=H)}),a},this._prepareProcessors=function(){var e=o.csData.nodes,t={};return e.forEach(function(e){t[e.id]=Object(N.a)({},t[e.id],{status:H,standBy:0})}),t},this._getTransmissionTact=function(e,t,a,n,r,s){console.log("_getTransmissionTact - source: ".concat(e,", target: ").concat(t,", taskEnded: ").concat(a,", TransmissionTacts: ").concat(n,", parentTask: ").concat(r,", task: ").concat(s)),console.log("Transmissions: ".concat(JSON.stringify(o.transmissionInfo)));var c=o.transmissions["".concat(r," -> ").concat(s)];console.log("Parent Transmission: ".concat(JSON.stringify(c)));var i=Math.max.apply(Math,Object(E.a)(o.transmissionInfo[e].filter(function(e){return o.connectionType===ae?e.status===ee:e}).map(function(e){return e.end})).concat(Object(E.a)(o.transmissionInfo[t].filter(function(e){return o.connectionType===ae?e.status===te:e}).map(function(e){return e.end})))),l=o.transferGaps(e,t,r).filter(function(e){return e.interval>=n&&e.start>=a});if(console.log("Free intervals: ".concat(JSON.stringify(l))),console.log("Last ended: ".concat(JSON.stringify(i))),l.length>0){var u=!0,m=!1,h=void 0;try{for(var d,p=l[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var f=d.value;if(!c)return f.start;if(c.end<=f.start)return f.start}}catch(g){m=!0,h=g}finally{try{u||null==p.return||p.return()}finally{if(m)throw h}}return i}return c?c.end>i?c.end:i:i>=a?i:a},this.transferGaps=function(e,t,a){for(var n=JSON.parse(JSON.stringify(o.transmissionInfo)),r=[].concat(Object(E.a)(n[e].filter(function(e){return o.connectionType===ae?e.status===ee:e})),Object(E.a)(n[t].filter(function(e){return o.connectionType===ae?e.status===te:e})),[{start:o.assignmentLog[a].started,end:o.assignmentLog[a].ended}]).slice().sort(function(e,t){return e.start>t.start?1:-1}),s=r.slice(0,1),c=1;c<r.length;c++){var i=r[c],l=s[s.length-1];i.start<=l.end?l.end=Math.max(l.end,i.end):s.push(i)}return o.findGaps(s.filter(function(e){return void 0!==e}))},this.findGaps=function(e){return e.sort(function(e,t){return e.start>t.start?1:-1}).map(function(e,t,a){if(t!==a.length-1)return{interval:a[t+1].start-e.end,start:e.end,end:a[t+1].start}}).filter(function(e){return void 0!==e})},this._makeTransmissions=function(e,t,a){var n=a,r=o.tasks[e].parents;if(0===Object.keys(r).length)return a;var s=Object.keys(r).map(function(r){var s=o.assignmentLog[r],c=s.ended,i=s.processorId;if(i===t)return a;var l=o._getShortestPath(parseInt(i),parseInt(t));if(console.log("Path to transmit ".concat(r," to ").concat(e," from processor ").concat(i," to ").concat(t,": ").concat(JSON.stringify(l))),-1===l)return a;var u=[];return l.forEach(function(t,s){if(s!==l.length-1){var i=t,m=l[s+1],h=o.tasks[e].parents[r];a=o._getTransmissionTact(i,m,c,h,r,e,n);var d=parseInt(a),p=parseInt(a)+parseInt(h);console.log("Transmission of task ".concat(r," from ").concat(i," to ").concat(m," starts on ").concat(d," and ends on ").concat(p)),o.transmissions["".concat(r," -> ").concat(e)]={start:d,end:p},o.transmissionInfo[i].push({start:d,end:p,task:r,status:ee}),o.transmissionInfo[m].push({start:d,end:p,task:r,status:te}),o.result=Object(N.a)({},o.result,Object(y.a)({},"".concat(r,"->").concat(e,"(").concat(m,")"),{values:[{x:d,y:parseFloat(i)+.25},{x:p,y:parseFloat(i)+.25}],color:o.colors[r]})),u.push(p)}}),Math.max.apply(Math,u)});return Math.max.apply(Math,Object(E.a)(s).concat([0]))},this._executeTask=function(e,t,a){var n=a;n>(a=o._makeTransmissions(e,t,a))&&(a=n),console.log("---\x3e Executting task ".concat(e," on processor ").concat(t," with a starting tact of ").concat(a)),o.assignmentLog[e]={processorId:t,started:a,ended:a+o.tasks[e].weight},o.processors[t].status=o.processors[t].status===Z?Z:K,o.processors[t].from=a,o.processors[t].to=a+o.tasks[e].weight,o.processors[t].task=e,o.tasks[e].status=K,o.queue=o.queue.filter(function(t){return t.number!==e}),o.result[e]=o.result[e]?Object(E.a)(o.result[e]):{values:[{x:a,y:parseInt(t)},{x:a+o.tasks[e].weight,y:parseInt(t)}],color:o.colors[e]}},this._getFreeProcessors=function(e,t){switch(o.algo){case"2":return o._getFreeProcessors2(e);case"6":return o._getFreeProcessors6(e,t);default:throw Error("Algo is not implemented!")}},this._getFreeProcessors6=function(e,t){var a=Object.keys(o.processors).filter(function(t){var a=o.processors[t];return a.status===H||a.status===Z&&a.to<=e}),n=o.tasks[t].parents;if(Object.keys(n).length<=0)return o._getFreeProcessors2(e);var r=a.map(function(e){var t=0;return Object.keys(n).forEach(function(a){var r=o.assignmentLog[a].processorId,s=o._getShortestPath(parseInt(r),parseInt(e)).length;t+=s*n[a]}),Object(y.a)({},e,t)});return console.log(r),o._getFreeProcessors2(e)},this._getFreeProcessors2=function(e){var t=Object.keys(o.processors).filter(function(t){var a=o.processors[t];return a.status===H||a.status===Z&&a.to<=e});if(0===t.length)return-1;console.log("Free processors: ".concat(JSON.stringify(t)));var a=-1,n=0;return Object.values(t).forEach(function(e){var t=o.processors[e];t.standBy>a&&(a=t.standBy,n=e)}),console.log("Selected processorId: ".concat(n)),n},this._getReadyTasks=function(){var e=o.queue.filter(function(e){var t=e.number,a=o.tasks[t];if(0===Object.keys(a.parents).length)return a.status===H;var n=[];return Object.keys(a.parents).forEach(function(e){n.push(o.tasks[e].status===X||o.tasks[e].status===Z)}),n.every(function(e){return e})});return e=e.map(function(e){return e.number})},this._checkFinish=function(e){Object.keys(o.processors).forEach(function(t){var a=o.processors[t];a.status!==K&&a.status!==Z||a.to===e&&(console.log("Task ".concat(a.task," finished on ").concat(t)),a.status=a.status===Z?Z:H,a.standBy=0,o.tasks[a.task].status=X)})},this._processorsStandBy=function(){Object.keys(o.processors).forEach(function(e){var t=o.processors[e];t.status!==H&&t.status!==Z||o.processors[e].standBy++})},this.model=function(){for(var e=0;0!==o.queue.length;){e++,console.warn("Tact: ".concat(e)),console.log("Processors: ".concat(JSON.stringify(o.processors))),console.log("Tasks: ".concat(JSON.stringify(o.tasks))),console.log("Queue: ".concat(JSON.stringify(o.queue))),console.log("Transmission: ".concat(JSON.stringify(o.transmissionInfo))),o._checkFinish(e);var t=o._getReadyTasks();console.log("Ready tasks: ".concat(JSON.stringify(t)));try{if(0===t.length)throw new V("No tasks available!");var a=!0,n=!1,r=void 0;try{for(var s,c=t[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var i=s.value,l=o._getFreeProcessors(e,i);if(-1===l)throw new V("No free processors");o._executeTask(i,l,e)}}catch(u){n=!0,r=u}finally{try{a||null==c.return||c.return()}finally{if(n)throw r}}}catch(m){if(!(m instanceof V))throw m;console.log(m.message)}finally{o._processorsStandBy()}}return{result:o.result,tacts:e}},this.tasksData=t,this.csData=a,this.queue=n,this.algo=r,this.connectionType=parseInt(s),this.tasks=this._formDependecies(),this.processors=this._prepareProcessors(),this.result={},this.assignmentLog={},this.tasksOnProcessors={},this.colors=this._getColorArray(),this.transmissionInfo={},this.transmissions={},Object.keys(this.processors).forEach(function(e){o.tasksOnProcessors[e]=[],o.transmissionInfo[e]=[]})}return Object(i.a)(e,[{key:"_toEdgesArray",value:function(){var e=this.csData.edges,t=[];return e.forEach(function(e){t.push([e.from,e.to]),t.push([e.to,e.from])}),t}},{key:"_getShortestPath",value:function(e,t){var a=W({graph:this._toEdgesArray(),from:e,to:t});return e===t?[e]:0===a.length?-1:a.reduce(function(e,t){return e.length<t.length?e:t})}}]),e}(),re=a(18),se=(a(72),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={},a.renderLines=function(e){return Object.keys(e).map(function(t){var a=e[t];return r.a.createElement(re.c,{data:a.values,key:t,color:a.color,strokeWidth:3.5,animation:"nowobble",strokeDasharray:t.length>3?[7,3]:[]})})},a.renderLabels=function(e){return Object.keys(e).map(function(t){var a=e[t],n=a.values[0],s=a.values[1],o=n.x+(s.x-n.x)/2,c=n.y+.1;return r.a.createElement(re.b,{data:[{x:o,y:c,label:t}],style:{fontSize:"8pt"},key:t,labelAnchorY:"auto","labelAnchor\u0425":"auto"})})},a.renderProcessorsLines=function(e){return a.props.cs.nodes.map(function(t){return r.a.createElement(re.d,{data:[{x:.5,y:t.id},{x:a.getMax(e),y:t.id}],key:t.id,color:"#d1d1d1",strokeWidth:4})})},a.getMax=function(e){var t;return Math.max.apply(Math,Object(E.a)((t=[]).concat.apply(t,Object(E.a)(Object.values(e))).map(function(e){return e.values[1].x})))+.5},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){console.log(this.props);var e=this.props,t=e.tasks,a=e.cs,n=e.queue,s=e.assignmentAlgo,o=e.connectionType,c=new L(parseInt(n),t).run();console.clear();var i=new ne(t,a,c,s,o).model().result;return i?(console.log(JSON.stringify(i)),r.a.createElement(r.a.Fragment,null,r.a.createElement("h5",{className:"h5"},"\u0427\u0435\u0440\u0433\u0430 \u0437\u0430\u0434\u0430\u0447:"),r.a.createElement("div",null,Object.values(c).map(function(e){return e.number}).join(", ")),r.a.createElement("div",{style:{overflow:"auto",whiteSpace:"nowrap"}},r.a.createElement(re.g,{className:"my-4",height:600,width:65*this.getMax(i),xType:"linear",yType:"linear",xDomain:[.5,this.getMax(i)],yDomain:[Math.min.apply(Math,Object(E.a)(a.nodes.map(function(e){return e.id})))-.5,Math.max.apply(Math,Object(E.a)(a.nodes.map(function(e){return e.id})))+.5]},r.a.createElement(re.a,null),r.a.createElement(re.e,null),r.a.createElement(re.f,{title:"\u0422\u0430\u043a\u0442",position:"end"}),r.a.createElement(re.h,{title:"\u041f\u0415",position:"end",tickValues:Object(E.a)(a.nodes.map(function(e){return e.id})),tickFormat:function(e){return parseFloat(e).toFixed(0)}}),this.renderProcessorsLines(i),this.renderLines(i),this.renderLabels(i))))):r.a.createElement("div",null)}}]),t}(n.Component)),oe=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={tasks:-1,cs:-1,queue:-1,connectionType:-1,assignmentAlgo:-1},a.getGraphs=function(e){var t=localStorage.getItem(e);if(t)return t=JSON.parse(t)},a.getById=function(e,t){return e.filter(function(e){return e.id===t})[0]},a.handleChange=function(e){a.setState(Object(y.a)({},e.target.name,e.target.value))},a.handleChangeGraph=function(e){var t;a.setState((t={},Object(y.a)(t,e.target.name,e.target.value),Object(y.a)(t,"".concat(e.target.name,"Data"),a.getById(a.getGraphs(e.target.name),e.target.value).data),t))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.tasks,a=e.queue,n=e.cs,s=e.assignmentAlgo,o=e.tasksData,c=e.csData,i=e.connectionType;return r.a.createElement(r.a.Fragment,null,r.a.createElement(z,{handleChange:this.handleChange,handleChangeGraph:this.handleChangeGraph,tasks:t,cs:n,queue:a,connectionType:i,assignmentAlgo:s,getGraphs:this.getGraphs,tasksData:o,csData:c}),!(-1===t||-1===n||-1===a||-1===s||-1===i)&&r.a.createElement(se,{tasks:{nodes:new O.DataSet(o.nodes),edges:new O.DataSet(o.edges)},cs:{nodes:new O.DataSet(c.nodes),edges:new O.DataSet(c.edges)},queue:a,connectionType:i,assignmentAlgo:s}))}}]),t}(n.Component),ce=function(){return r.a.createElement("div",{className:"container my-4"},r.a.createElement(v.a,null,r.a.createElement(b.a,{exact:!0,key:"home-page",path:"/",render:function(){return document.title="\u041f\u0417\u041a\u0421 - 2",r.a.createElement(G,null)}}),r.a.createElement(b.a,{key:"tasks-graphs",exact:!0,path:"/tasks",render:function(){return document.title="\u0413\u0440\u0430\u0444\u0438 \u0437\u0430\u0434\u0430\u0447 | \u041f\u0417\u041a\u0421 - 2",r.a.createElement(R,{name:"tasks",title:"\u0413\u0440\u0430\u0444\u0438 \u0437\u0430\u0434\u0430\u0447"})}}),r.a.createElement(b.a,{exact:!0,path:"/tasks/new",render:function(){return document.title="\u041d\u043e\u0432\u0438\u0439 \u0433\u0440\u0430\u0444 \u0437\u0430\u0434\u0430\u0447 | \u041f\u0417\u041a\u0421 - 2",r.a.createElement(T,{name:"tasks"})}}),r.a.createElement(b.a,{path:"/tasks/:id",exact:!0,type:"task",render:function(e){return document.title="\u0420\u0435\u0434\u0430\u043a\u0442\u043e\u0440 \u0433\u0440\u0430\u0444\u0443 \u0437\u0430\u0434\u0430\u0447 | \u041f\u0417\u041a\u0421 - 2",r.a.createElement(T,{name:"tasks",id:e.match.params.id})}}),r.a.createElement(b.a,{path:"/tasks/:id*/queue",exact:!0,type:"task",render:function(e){return document.title="\u0424\u043e\u0440\u043c\u0443\u0432\u0430\u043d\u043d\u044f \u0447\u0435\u0440\u0433\u0438 \u0437\u0430\u0434\u0430\u0447 | \u041f\u0417\u041a\u0421 - 2",r.a.createElement(U,{id:e.match.params.id})}}),r.a.createElement(b.a,{key:"cs-graphs",exact:!0,path:"/cs",render:function(){return document.title="\u0413\u0440\u0430\u0444\u0438 \u043a\u043e\u043c\u043f'\u044e\u0442\u0435\u0440\u043d\u0438\u0445 \u0441\u0438\u0441\u0442\u0435\u043c | \u041f\u0417\u041a\u0421 - 2",r.a.createElement(R,{name:"cs",title:"\u0413\u0440\u0430\u0444\u0438 \u043a\u043e\u043c\u043f'\u044e\u0442\u0435\u0440\u043d\u043e\u0457 \u0441\u0438\u0441\u0442\u0435\u043c\u0438"})}}),r.a.createElement(b.a,{exact:!0,path:"/cs/new",render:function(){return document.title="\u041d\u043e\u0432\u0438\u0439 \u0433\u0440\u0430\u0444 \u043a\u043e\u043c\u043f'\u044e\u0442\u0435\u0440\u043d\u043e\u0457 \u0441\u0438\u0441\u0442\u0435\u043c\u0438 | \u041f\u0417\u041a\u0421 - 2",r.a.createElement(T,{name:"cs"})}}),r.a.createElement(b.a,{path:"/cs/:id",type:"task",render:function(e){return document.title="\u0420\u0435\u0434\u0430\u043a\u0442\u043e\u0440 \u0433\u0440\u0430\u0444\u0443 \u043a\u043e\u043c\u043f'\u044e\u0442\u0435\u0440\u043d\u043e\u0457 \u0441\u0438\u0441\u0442\u0435\u043c\u0438 | \u041f\u0417\u041a\u0421 - 2",r.a.createElement(T,{name:"cs",id:e.match.params.id})}}),r.a.createElement(b.a,{path:"/model",exact:!0,render:function(){return document.title="\u041c\u043e\u0434\u0435\u043b\u044e\u0432\u0430\u043d\u043d\u044f | \u041f\u0417\u041a\u0421 - 2",r.a.createElement(oe,null)}})))};a(73);d.b.add(p.b);var ie=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(h.a,{basename:"/pzks2"},r.a.createElement(r.a.Fragment,null,r.a.createElement(g,null),r.a.createElement(ce,null)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(ie,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[45,1,2]]]);