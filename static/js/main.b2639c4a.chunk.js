(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{46:function(e,t,a){e.exports=a(75)},51:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(38),o=a.n(s),c=(a(51),a(2)),i=a(3),l=a(6),u=a(5),m=a(7),h=a(77),d=a(23),p=a(16),f=a(76),g=(a(36),a(54),a(55),function(){return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},r.a.createElement(f.a,{className:"navbar-brand",to:"/"},"\u041f\u0417\u041a\u0421-2"),r.a.createElement("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{class:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(f.a,{className:"nav-link",activeClassName:"active",to:"/tasks"},"\u0413\u0440\u0430\u0444 \u0437\u0430\u0434\u0430\u0447 ",r.a.createElement("span",{className:"sr-only"},"(current)"))),r.a.createElement("li",{className:"nav-item"},r.a.createElement(f.a,{className:"nav-link",activeClassName:"active",to:"/cs"},"\u0413\u0440\u0430\u0444 \u043a\u043e\u043c\u043f'\u044e\u0442\u0435\u0440\u043d\u043e\u0457 \u0441\u0438\u0441\u0442\u0435\u043c\u0438")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(f.a,{exact:!0,className:"nav-link",activeClassName:"active",to:"/model"},"\u041c\u043e\u0434\u0435\u043b\u044e\u0432\u0430\u043d\u043d\u044f")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(f.a,{exact:!0,className:"nav-link disabled",activeClassName:"active",to:"/stats"},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430")))))}),v=a(78),b=a(39),E=a(10),y=a(4),k=a(79),O=a(8),w=a(11),N=(a(60),1),j=2,S=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).locales={uk:{edit:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438",del:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u043e\u0431\u0440\u0430\u043d\u0435",back:"\u041d\u0430\u0437\u0430\u0434",addNode:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0432\u0435\u0440\u0448\u0438\u043d\u0443",addEdge:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0437\u0432'\u044f\u0437\u043e\u043a",editNode:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0432\u0435\u0440\u0448\u0438\u043d\u0443",editEdge:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0437\u0432'\u044f\u0437\u043e\u043a",addDescription:"\u041d\u0430\u0442\u0438\u0441\u043d\u0456\u0442\u044c \u043d\u0430 \u043f\u0443\u0441\u0442\u043e\u043c\u0443 \u043c\u0456\u0441\u0446\u0456 \u0430\u0431\u0438 \u0434\u043e\u0434\u0430\u0442\u0438 \u0432\u0435\u0440\u0448\u0438\u043d\u0443.",edgeDescription:"\u0410\u0431\u0438 \u0437'\u0454\u0434\u043d\u0430\u0442\u0438 \u0432\u0435\u0440\u0448\u0438\u043d\u0438 \u043a\u043b\u0456\u043a\u043d\u0456\u0442\u044c \u043f\u043e \u043f\u043e\u0447\u0430\u0442\u043a\u043e\u0432\u0456\u0439 \u0432\u0435\u0440\u0448\u0438\u043d\u0456 \u0442\u0430 \u043f\u043e \u043a\u0456\u043d\u0446\u0435\u0432\u0456\u0439.",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",createEdgeError:"Cannot link edges to a cluster.",deleteClusterError:"Clusters cannot be deleted.",editClusterError:"Clusters cannot be edited."}},a.params=function(e,t,n,r){var s="edit"===n,o="\u0437\u0432'\u044f\u0437\u043a\u0443"===r,c=a.state.data.nodes.map(function(e){return e.id}).sort(function(e,t){return t-e})[0],i=s?e.number:isNaN(c)?0:c+1,l=a.getWeight(r,s,e);if(l){var u="".concat(o?a.state.type===N?"":"".concat(l):a.state.type===N?"".concat(i):"".concat(i,"\n \u2014 \n").concat(l));e.number=i,e.weight=l,e.label=u,s||o||(e.id=i);try{return t(e)}catch(m){console.log(m)}}},a.onDoubleClick=function(e){var t=e.nodes,n=e.edges,r=a.state,s=r.data,o=s.nodes,c=s.edges;if(r.type!==N)if(t.length>0){var i=o.get(t[0]),l=a.getWeight("\u0432\u0435\u0440\u0448\u0438\u043d\u0438",!0,{weight:i.weight});if(!l)return;var u="".concat(i.id,"\n\u2014\n").concat(l);o.update(Object(w.a)({},i,{weight:l,label:u}))}else{var m=c.get(n[0]),h=a.getWeight("\u0437\u0432'\u044f\u0437\u043a\u0443",!0,{weight:m.weight});if(!h)return;var d="".concat(h);c.update(Object(w.a)({},m,{weight:h,label:d}))}},a.type="tasks"===e.name?j:N,a.network={},a.appRef=Object(n.createRef)(),a.options={locales:a.locales,locale:"uk",physics:{enabled:!1},manipulation:{enabled:void 0===a.props.manipulationActive||a.props.manipulationActive,initiallyActive:!0,addNode:function(e,t){a.params(e,t,"add","\u0432\u0435\u0440\u0448\u0438\u043d\u0438")},addEdge:function(e,t){a.params(e,t,"add","\u0437\u0432'\u044f\u0437\u043a\u0443")}},edges:{arrows:{to:{enabled:a.type===j}}}},a.state={data:e.data,type:a.type,manipulationActive:void 0===a.props.manipulationActive||a.props.manipulationActive},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"getWeight",value:function(e,t,a){if(this.state.type===N)return" ";var n=prompt("\u0412\u0430\u0433\u0430 ".concat(e),t?a.weight:"");return n?(n=parseInt(n),isNaN(n)?alert("\u041d\u0435\u0432\u0456\u0440\u043d\u0438\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0432\u0430\u0433\u0438 ".concat(e,"!")):n<=0?alert("\u0412\u0430\u0433\u0430 \u043d\u0435 \u043c\u043e\u0436\u0435 \u0431\u0443\u0442\u0438 \u043d\u0435\u0433\u0430\u0442\u0438\u0432\u043d\u043e\u044e \u0447\u0438 \u0434\u043e\u0440\u0456\u0432\u043d\u044e\u0432\u0430\u0442\u0438 0"):n):alert('"\u0412\u0430\u0433\u0443 '.concat(e,' \u043d\u0435 \u0437\u0430\u0434\u0430\u043d\u043e!"'))}},{key:"getSnapshotBeforeUpdate",value:function(e,t){return e.data!==this.props.data}},{key:"componentDidMount",value:function(){var e=this;this.network=new O.Network(this.appRef.current,this.props.data,this.options),this.state.type===j&&this.state.manipulationActive&&this.network.on("doubleClick",function(t){return e.onDoubleClick(t)}),this.setState({data:{nodes:this.network.body.data.nodes,edges:this.network.body.data.edges}})}},{key:"componentDidUpdate",value:function(e,t,a){var n=this;a&&(this.network=new O.Network(this.appRef.current,this.props.data,this.options),this.state.type===j&&this.state.manipulationActive&&this.network.on("doubleClick",function(e){return n.onDoubleClick(e)}),this.setState({data:{nodes:this.network.body.data.nodes,edges:this.network.body.data.edges}}))}},{key:"render",value:function(){var e=this.props,t=e.height,a=e.width;return r.a.createElement("div",{className:"my-3",style:{height:t||"600px",width:a||"100%"},ref:this.appRef})}}]),t}(n.Component),x=function(e){var t=e.type,a=e.message;return r.a.createElement("div",{className:"alert ".concat("error"===t?"alert-danger":"alert-info")},a)},C=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={vertexNumb:5,maxWeight:10,minWeight:1,correlation:.5},a.handleChange=function(e){a.setState(Object(y.a)({},e.target.name,e.target.value))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.vertexNumb,n=t.maxWeight,s=t.minWeight,o=t.correlation;return r.a.createElement("div",{className:"my-4"},r.a.createElement("h4",null,"\u0413\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440 \u0433\u0440\u0430\u0444\u0443 \u0437\u0430\u0434\u0430\u0447"),r.a.createElement("form",{className:"py-4"},r.a.createElement("div",{className:"input-group mb-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("div",{className:"input-group-text"},"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u0432\u0435\u0440\u0448\u0438\u043d (\u0437\u0430\u0434\u0430\u0447): ")),r.a.createElement("input",{type:"number",className:"form-control",autoComplete:"off",name:"vertexNumb",value:a,onChange:this.handleChange})),r.a.createElement("div",{className:"input-group mb-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("div",{className:"input-group-text"},"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430 \u0432\u0430\u0433\u0430 \u0432\u0435\u0440\u0448\u0438\u043d\u0438: ")),r.a.createElement("input",{type:"number",className:"form-control",name:"maxWeight",min:"1",autoComplete:"off",value:n,onChange:this.handleChange})),r.a.createElement("div",{className:"input-group mb-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("div",{className:"input-group-text"},"\u041c\u0456\u043d\u0456\u043c\u0430\u043b\u044c\u043d\u0430 \u0432\u0430\u0433\u0430 \u0432\u0435\u0440\u0448\u0438\u043d\u0438: ")),r.a.createElement("input",{type:"number",className:"form-control",min:"1",autoComplete:"off",name:"minWeight",value:s,onChange:this.handleChange})),r.a.createElement("div",{className:"input-group mb-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("div",{className:"input-group-text"},"\u0417\u0432'\u044f\u0437\u043d\u0456\u0441\u0442\u044c: ")),r.a.createElement("input",{type:"number",className:"form-control",autoComplete:"off",step:"0.01",min:"0",max:"1",name:"correlation",value:o,onChange:this.handleChange})),r.a.createElement("button",{className:"btn btn-primary float-right",onClick:function(t){return e.props.onGenerate(t,e.state)}},"\u0417\u0433\u0435\u043d\u0435\u0440\u0443\u0432\u0430\u0442\u0438")))}}]),t}(n.Component),_=function(){return"_"+Math.random().toString(36).substr(2,9)},D=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={graphName:"",data:{edges:new O.DataSet,nodes:new O.DataSet}},a.handleChange=function(e){a.setState(Object(y.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){var t=a.props,n=t.history,r=t.id,s=t.name;if(e.preventDefault(),a.graphToMatrix(),"cs"!==s&&a.isCyclic())a.setState({error:"\u0426\u0438\u043a\u043b\u0456\u0447\u043d\u0438\u0439 \u0433\u0440\u0430\u0444!"});else if("tasks"!==s&&a.isConnected())a.setState({error:"\u0413\u0440\u0430\u0444 \u043d\u0435\u0437\u0432'\u044f\u0437\u043d\u0438\u0439!"});else{var o=a.state.data,c=o.nodes,i=o.edges,l={nodes:c=c._data?Object.values(c._data):[],edges:i=i._data?Object.values(i._data):[]},u=a.state.graphName,m=localStorage.getItem("".concat(s));m=m?JSON.parse(m):[];var h={};r&&(h=m.filter(function(e){return e.id===r})[0]);var d={name:u||"\u0411\u0435\u0437 \u0456\u043c\u0435\u043d\u0456 ".concat(m.length),data:l,id:r?h.id:_(),created:r?h.created:new Date,updated:new Date};r?m=[].concat(Object(E.a)(m.filter(function(e){return e.id!==r})),[d]):m.push(d),localStorage.setItem("".concat(s),JSON.stringify(m));var p=new URLSearchParams(window.location.search),f=p.has("next")?p.get("next"):null;console.log(f),n.push("".concat(f||"/".concat(s)))}},a.handleGenerate=function(e,t){e.preventDefault();var n=t.vertexNumb,r=t.maxWeight,s=t.minWeight,o=t.correlation;a.generate(n,r,s,o)},a.generate=function(e,t,n,r){for(var s=a.state.data,o=s.edges,c=s.nodes,i=[],l=0;l<e;l++){var u=a._getRandomInt(n,t);i.push({id:l,number:l,weight:u,label:"".concat(l,"\n\u2014\n").concat(u),x:a._getRandomInt(-500,500),y:a._getRandomInt(-500,500)})}for(var m=i.reduce(function(e,t){return e+t.weight},0),h=Math.round(m*(1-r)/r),d=[],p=[],f=0;f<e;f++)p.push(0);for(var g=0;g<e;g++)d.push(p.slice());for(var v=0;v<h;){var b=a._getRandomInt(0,e-1),E=a._getRandomInt(0,e-1);if(b===E&&(E=b+1),d[E][b]>0){var y=b;b=E,E=y}d[b][E]+=1,v+=1}var k=[];d.forEach(function(e,t){e.forEach(function(e,a){e>0&&k.push({from:t,to:a,weight:e,label:"".concat(e)})})}),c.clear(),o.clear(),c.add(i),o.add(k),a.graphToMatrix();for(var O=a.isCyclic();O;)o.forEach(function(e){if(console.log("".concat(JSON.stringify(e),", cycle: ").concat(JSON.stringify(O)," ").concat(e.from===O.from&&e.to===O.to)),e.from===O.from&&e.to===O.to){var t=e.weight;o.remove(e.id);var n=o.getIds(),r=n[a._getRandomInt(0,n.length)];console.log(o.get(r));var s=o.get(r);return o.update({id:r,weight:s.weight+t,label:"".concat(s.weight+t)}),console.log(o.get(r)),a.graphToMatrix(),void(O=a.isCyclic())}});a.setState({generated:!0,nodesWeightSum:m,edgesWeightSum:v})},a._getRandomInt=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e},a.errorRef=r.a.createRef(),a.graphRef=r.a.createRef(),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.id,a=e.name;if(t){var n=localStorage.getItem("".concat(a));if(n){var r=(n=JSON.parse(n)).filter(function(e){return e.id===t})[0],s=r.data,o=s.edges,c=s.nodes,i={edges:new O.DataSet(o),nodes:new O.DataSet(c)};this.setState({graphName:r.name,data:i})}}}},{key:"componentDidUpdate",value:function(e,t){this.state.error&&window.scrollTo(0,this.errorRef.current.offsetTop),this.state.generated&&window.scrollTo(0,this.graphRef.current.offsetTop)}},{key:"isConnected",value:function(){var e=this.state.data,t=e.nodes,a=e.edges,n={},r={};for(var s in t.forEach(function(e){n[e.id]=[]}),a.forEach(function(e){n[e.from].push(e.to),n[e.to].push(e.from)}),n)r[s]||(r[s]={}),n[s].forEach(function(e){r[s][e]=1,r[e]||(r[e]={}),r[e][s]=1});for(var o=!1,c=0;c<t.length;c++){var i=t.get(c);if(i){var l=this.isConnectedUtil(i.id,r);if(Object.keys(l).length!==Object.keys(r).length){o=!0;break}}}return o}},{key:"isConnectedUtil",value:function(e,t){var a={};for(a[e]=[],a[e].dist=0;;){var n=null,r=null,s=1/0;for(var o in a)if(a[o]){var c=a[o].dist,i=t[o];for(var l in i)if(!a[l]){var u=i[l]+c;u<s&&(n=a[o],r=l,s=u)}}if(s===1/0)break;a[r]=n.concat(r),a[r].dist=s}return a}},{key:"graphToMatrix",value:function(){var e=this,t=this.state.data,a=t.nodes,n=t.edges;this.matrix={},a.forEach(function(t){e.matrix[t.id]=[]}),n.forEach(function(t){e.matrix[t.from].push(t.to)})}},{key:"isCyclic",value:function(){for(var e=Object.keys(this.matrix),t={},a={},n=0;n<e.length;n++){var r=e[n],s=this.cyclicUtil(r,t,a);if(-1!==s)return{from:parseInt(r),to:s}}return!1}},{key:"cyclicUtil",value:function(e,t,a){if(!t[e]){t[e]=!0,a[e]=!0;for(var n=this.matrix[e],r=0;r<n.length;r++){var s=n[r];if(!t[s]&&-1!==this.cyclicUtil(s,t,a))return s;if(a[s])return s}}return a[e]=!1,-1}},{key:"render",value:function(){var e=this,t=this.state,a=t.graphName,n=t.data,s=t.error,o=t.edgesWeightSum,c=t.nodesWeightSum,i=t.generated,l=this.props,u=l.name,m=l.id;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"my-4"},r.a.createElement("h4",{className:"my-4"},"\u0420\u0435\u0434\u0430\u043a\u0442\u043e\u0440 \u0433\u0440\u0430\u0444\u0443"),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group",ref:this.errorRef},r.a.createElement("input",{name:"graphName",autoComplete:"off",required:!0,value:a,onChange:this.handleChange,className:"form-control",placeholder:"\u041d\u0430\u0437\u0432\u0430 \u0433\u0440\u0430\u0444\u0443"})),s&&r.a.createElement(x,{type:"error",message:s}),r.a.createElement(S,{data:n,name:this.props.name,ref:this.graphRef}),i&&r.a.createElement("div",null,"\u0421\u0443\u043c\u0430\u0440\u043d\u0430 \u0432\u0430\u0433\u0430 \u0432\u0435\u0440\u0448\u0438\u043d \u0433\u0440\u0430\u0444\u0443: ".concat(c,", c\u0443\u043c\u0430\u0440\u043d\u0430 \u0432\u0430\u0433\u0430 \u0434\u0443\u0433 \u0433\u0440\u0430\u0444\u0443: ").concat(o)),r.a.createElement("input",{type:"submit",onClick:this.handleSubmit,className:"btn btn-primary float-right",value:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"}))),"tasks"===u&&!m&&r.a.createElement(C,{onGenerate:function(t,a){return e.handleGenerate(t,a)}}))}}]),t}(n.Component),T=Object(k.a)(D),I=a(34),M=a(17),A=function(e){var t=e.item,a=e.index,n=e.onDelete,s=e.onClone,o=e.name;return r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},a+1),r.a.createElement("td",null,r.a.createElement(I.a,{to:"/".concat(o,"/").concat(t.id)},t.name?t.name:"\u0411\u0435\u0437 \u0456\u043c\u0435\u043d\u0456")),r.a.createElement("td",null,new Date(t.created).toLocaleString("uk-UA",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),r.a.createElement("td",null,new Date(t.updated).toLocaleString("uk-UA",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})),r.a.createElement("td",null,r.a.createElement("div",{className:"btn-group",role:"group"},"tasks"===o&&r.a.createElement(I.a,{to:"/tasks/".concat(t.id,"/queue"),className:"btn btn-primary btn-sm",title:"\u0421\u0444\u043e\u0440\u043c\u0443\u0432\u0430\u0442\u0438 \u0447\u0435\u0440\u0433\u0443"},r.a.createElement(M.a,{icon:p.e})),r.a.createElement(I.a,{to:"/".concat(o,"/").concat(t.id),className:"btn btn-primary btn-sm",title:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438"},r.a.createElement(M.a,{icon:p.c})),r.a.createElement("button",{type:"button",className:"btn btn-info btn-sm",onClick:function(){return s(t.id)},title:"\u041a\u043b\u043e\u043d\u0443\u0432\u0430\u0442\u0438"},r.a.createElement(M.a,{icon:p.a})),r.a.createElement("button",{type:"button",className:"btn btn-danger btn-sm",onClick:function(){return n(t.id)},title:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"},r.a.createElement(M.a,{icon:p.f})))))},R=function(e){var t=e.list,a=e.onDelete,n=e.onClone,s=e.name;if(!t||t.length<1)return r.a.createElement("h6",{className:"text-center my-2 text-secondary"},"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0443\u0441\u0442\u0438\u0439");var o=t.sort(function(e,t){return new Date(t.created)-new Date(e.created)}).map(function(e,t){return r.a.createElement(A,{key:e.id,item:e,index:t,onDelete:a,onClone:n,name:s})});return r.a.createElement(r.a.Fragment,null,r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"10%"}},"#"),r.a.createElement("th",{style:{width:"30%"}},"\u0406\u043c'\u044f"),r.a.createElement("th",{style:{width:"25%"}},"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043e"),r.a.createElement("th",{style:{width:"25%"}},"\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043e"),r.a.createElement("th",{style:{width:"10%"}},"\u041e\u043f\u0435\u0440\u0430\u0446\u0456\u0457"))),r.a.createElement("tbody",null,o)))},F=function(){return"_"+Math.random().toString(36).substr(2,9)},P=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},a.handleDelete=function(e){if(window.confirm("\u0414\u0456\u0439\u0441\u043d\u043e \u0431\u0430\u0436\u0430\u0454\u0442\u0435 \u0432\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0433\u0440\u0430\u0444?")){var t=a._getGraphs();t=t.filter(function(t){return t.id!==e}),localStorage.setItem(a.props.name,JSON.stringify(t)),a.setState({graphs:t})}},a.handleClone=function(e){var t=a._getGraphs(),n=Object(w.a)({},t.filter(function(t){return t.id===e})[0]);n.name="".concat(n.name," - \u043a\u043e\u043f\u0456\u044f"),n.id=F();var r=new Date;n.created=r,n.updated=r,t=[].concat(Object(E.a)(t),[n]),localStorage.setItem(a.props.name,JSON.stringify(t)),a.setState({graphs:t})},a.handleDeleteAll=function(){window.confirm("\u0412\u0438 \u0441\u043f\u0440\u0430\u0432\u0434\u0456 \u0431\u0430\u0436\u0430\u0454\u0442\u0435 \u0432\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0432\u0441\u0456 \u0433\u0440\u0430\u0444\u0438?")&&(localStorage.setItem(a.props.name,[]),a.setState({graphs:localStorage.getItem(a.props.name)}))},a.handleNew=function(){a.setState({view:{showModal:!0}})},a._getGraphs=function(){var e=localStorage.getItem(a.props.name);if(e)return e=JSON.parse(e)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){if(this.props.name){var e=localStorage.getItem(this.props.name);if(!e)return this.setState({graphs:[]});this.setState({graphs:JSON.parse(e)})}}},{key:"render",value:function(){var e=this.state.graphs,t=this.props.name;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",{className:"my-4"},this.props.title,r.a.createElement("div",{className:"float-right btn-group"},r.a.createElement(I.a,{to:"/".concat(t,"/new"),className:"btn btn-primary"},r.a.createElement(M.a,{icon:p.d})),r.a.createElement("button",{className:"btn btn-danger",onClick:this.handleDeleteAll},r.a.createElement(M.a,{icon:p.g})))),r.a.createElement(R,{name:t,list:e,onDelete:this.handleDelete,onClone:this.handleClone}))}}]),t}(n.Component),J=function(){return r.a.createElement("div",{className:"jumbotron"},r.a.createElement("h4",{className:"h4"},"\u041f\u0440\u043e\u0433\u0440\u0430\u043c\u043d\u0435 \u0437\u0430\u0431\u0435\u0437\u043f\u0435\u0447\u0435\u043d\u043d\u044f \u043a\u043e\u043c\u043f'\u044e\u0442\u0435\u0440\u043d\u0438\u0445 \u0441\u0438\u0441\u0442\u0435\u043c-2"),r.a.createElement("hr",null),r.a.createElement("p",{className:"lead"},r.a.createElement("b",null,"\u0412\u0438\u043a\u043e\u043d\u0430\u0432:"),r.a.createElement("br",null)," \u0441\u0442\u0443\u0434\u0435\u043d\u0442 \u0433\u0440\u0443\u043f\u0438 \u0406\u041e-82\u043c\u043f ",r.a.createElement("br",null)," \u0411\u0430\u0440\u0430\u0431\u0430\u0448 \u0422.\u0410."),r.a.createElement(I.a,{to:"/tasks",className:"btn btn-primary float-right"},"\u041f\u043e\u0447\u0430\u0442\u0438 \u0440\u043e\u0431\u043e\u0442\u0443"))};function G(e){var t=e.edge,a=e.path;return function(e,t){var a,n=[];for(a=0;a<e.length;a++)e[a]===t&&n.push(a);return n}(a,t.from).some(function(e){return a[e+1]===t.to})}var q=function(e){var t=e.graph,a=void 0===t?[]:t,n=e.from,r=e.to,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=function(e){var t=new Map;return function(){var a=JSON.stringify(arguments),n=t.get(a);return n||(n=e.apply(this,arguments),t.set(a,n),n)}}(function(e,t){return e.reduce(function(e,a){return a[0]===t&&e.push(a[1]),e},[])}.bind(null,a));return function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];s.push(t);var r=!0,c=!1,i=void 0;try{for(var l,u=o(t)[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var m=l.value;if(m!==a)G({edge:{from:t,to:m},path:s})||e(m,a,n);else{var h=s.slice();h.push(a),n.push(h)}}}catch(d){c=!0,i=d}finally{try{r||null==u.return||u.return()}finally{if(c)throw i}}return s.pop(),n}(n,r)},W=function(){function e(t,a){Object(c.a)(this,e),this._method=t,this._data=a}return Object(i.a)(e,[{key:"run",value:function(){var e;switch(this._method){case 1:e=this._run1();break;case 11:e=this._run11();break;default:throw new Error("Unsupported algo")}return e}},{key:"_toMatrix",value:function(e){var t=this._data,a=t.nodes,n=t.edges,r=[];return n.forEach(function(t){e?r[t.to]=Object(w.a)({},r[t.to],Object(y.a)({},t.from,a.get(t.from).weight)):r[t.from]=Object(w.a)({},r[t.from],Object(y.a)({},t.to,a.get(t.to).weight))}),r}},{key:"_toEdgesArray",value:function(e){var t=this._data.edges,a=[];return t.forEach(function(t){a.push(e?[t.to,t.from]:[t.from,t.to])}),a}},{key:"_toUndirectedMatrix",value:function(){var e=this._data,t=e.nodes,a=e.edges,n=[];return a.forEach(function(e){n[e.to]=Object(w.a)({},n[e.to],Object(y.a)({},e.from,t.get(e.from).weight)),n[e.from]=Object(w.a)({},n[e.from],Object(y.a)({},e.to,t.get(e.to).weight))}),n}},{key:"_getPaths",value:function(e,t,a){return q({graph:this._toEdgesArray(a),from:e,to:t})}},{key:"_BFS",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=this._data.nodes,n=Object.keys(a._data),r=Object.keys(this._toMatrix(t)),s=n.filter(function(e){return!r.includes(e)}),o={},c={};return r.forEach(function(n){n=parseInt(n);var r=0,i=[];s.forEach(function(s){s=parseInt(s),e._getPaths(n,s,t).forEach(function(e){var s=e.reduce(function(e,t){return e+a.get(t).weight},t?-a.get(n).weight:0);r<s&&(r=s,i=e)}),o[s]=t?0:a.get(s).weight,c[s]=[s]}),o[n]=r,c[n]=i}),{weights:o,maxPaths:c}}},{key:"_run1",value:function(){for(var e=this._data.nodes,t=this._BFS(),a=t.weights,n=t.maxPaths,r=Math.max.apply(Math,Object(E.a)(Object.values(a))),s=Object.values(n).map(function(e){return e.length}),o=Math.max.apply(Math,Object(E.a)(s)),c=[],i=0;i<e.length;i++){var l=a[i]/r+s[i]/o;c.push({number:i,value:l,names:["Pr"]})}return c.sort(function(e,t){return t.value-e.value})}},{key:"_run11",value:function(){var e=this._toUndirectedMatrix(),t=this._data.nodes,a=Object.keys(t._data),n=this._BFS(!0).weights;return a.map(function(t){return{number:t,value:e[t]?Object.keys(e[t]).length:0,weights:n[t],names:["Sv","T\u043a\u0440.\u043f\u043e\u0447."]}}).sort(function(e,t){return e.value===t.value?e.weights-t.weights:t.value-e.value})}}]),e}(),B=function(e){var t=e.data;return r.a.createElement("table",{className:"table my-4"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"\u041d\u043e\u043c\u0435\u0440 \u0443 \u0447\u0435\u0440\u0437\u0456"),r.a.createElement("th",null,"\u041d\u043e\u043c\u0435\u0440 \u0432\u0435\u0440\u0448\u0438\u043d\u0438"),r.a.createElement("th",null,"\u041f\u043e\u043a\u0430\u0437\u043d\u0438\u043a"))),r.a.createElement("tbody",null,t.map(function(e,t){return console.log(e),r.a.createElement("tr",{key:t,"data-item":e},r.a.createElement("td",null,t+1),r.a.createElement("td",null,e.number),r.a.createElement("td",null,1===e.names.length?"".concat(e.names," = ").concat(e.value.toFixed(2)):"".concat(e.names[0]," = ").concat(e.value,", ").concat(e.names[1]," = ").concat(e.weights)))})))},L=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleOptionChange=function(e){var t=parseInt(e.target.value);a.setState({algo:t});var n=new W(t,a.props.data).run();window.scrollTo(0,a.resultsRef.current.offsetTop),a.setState({results:n})},a.resultsRef=Object(n.createRef)(),a.state={data:e.data,results:[],algo:-1,description:{1:"\u0423 \u043f\u043e\u0440\u044f\u0434\u043a\u0443 \u0441\u043f\u0430\u0434\u0430\u043d\u043d\u044f \u043f\u0440\u043e\u043d\u043e\u0440\u043c\u043e\u0432\u0430\u043d\u043e\u0457 \u0441\u0443\u043c\u0438 \u043a\u0440\u0438\u0442\u0438\u0447\u043d\u0438\u0445 \u043f\u043e \u0447\u0430\u0441\u0443 \u0456 \u043f\u043e \u043a\u0456\u043b\u044c\u043a\u043e\u0441\u0442\u0456 \u0432\u0435\u0440\u0448\u0438\u043d \u0448\u043b\u044f\u0445\u0456\u0432 \u0434\u043e \u043a\u0456\u043d\u0446\u044f \u0433\u0440\u0430\u0444\u0430 \u0437\u0430\u0434\u0430\u0447\u0456.",11:"\u0423 \u043f\u043e\u0440\u044f\u0434\u043a\u0443 \u0441\u043f\u0430\u0434\u0430\u043d\u043d\u044f \u0437\u0432\u2019\u044f\u0437\u043d\u043e\u0441\u0442\u0456 \u0432\u0435\u0440\u0448\u0438\u043d, \u0430 \u043f\u0440\u0438 \u0440\u0456\u0432\u043d\u0438\u0445 \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f\u0445 \u2013 \u0432 \u043f\u043e\u0440\u044f\u0434\u043a\u0443 \u0437\u0440\u043e\u0441\u0442\u0430\u043d\u043d\u044f \u043a\u0440\u0438\u0442\u0438\u0447\u043d\u043e\u0433\u043e \u043f\u043e \u043a\u0456\u043b\u044c\u043a\u043e\u0441\u0442\u0456 \u0432\u0435\u0440\u0448\u0438\u043d \u0448\u043b\u044f\u0445\u0456\u0432 \u0432\u0456\u0434 \u043f\u043e\u0447\u0430\u0442\u043a\u0443 \u0433\u0440\u0430\u0444\u0430 \u0437\u0430\u0434\u0430\u0447\u0456. "}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(e,t){this.state.results.length>0&&window.scrollTo(0,this.resultsRef.current.offsetTop)}},{key:"render",value:function(){var e=this.state,t=e.results,a=e.algo,n=e.description;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"algo"},r.a.createElement("h5",null,"\u0410\u043b\u0433\u043e\u0440\u0438\u0442\u043c: ")),r.a.createElement("select",{className:"custom-select",name:"algo",value:a,onChange:this.handleOptionChange},r.a.createElement("option",{value:"-1",disabled:!0},"\u041e\u0431\u0440\u0430\u0442\u0438"),r.a.createElement("option",{value:"1"},"1"),r.a.createElement("option",{value:"11"},"11"))),r.a.createElement("div",{ref:this.resultsRef},a>0&&r.a.createElement("div",null,r.a.createElement("h5",null,"\u041e\u043f\u0438\u0441 \u0430\u043b\u0433\u043e\u0440\u0438\u0442\u043c\u0443: "),n[a],r.a.createElement("h5",{className:"my-2"},"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442: "),r.a.createElement(B,{data:t}))))}}]),t}(n.Component),U=function(e){function t(e){var a;Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={};var n=e.id,r=localStorage.getItem("tasks");if(!r)return Object(l.a)(a);var s=(r=JSON.parse(r)).filter(function(e){return e.id===n})[0].data,o=s.edges,i=s.nodes,m={edges:new O.DataSet(o),nodes:new O.DataSet(i)};return a.state.data=m,a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.data,t=this.props.id;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"\u0424\u043e\u0440\u043c\u0443\u0432\u0430\u043d\u043d\u044f \u0447\u0435\u0440\u0433\u0438 \u0437\u0430\u0434\u0430\u0447",r.a.createElement("div",{className:"float-right btn-group"},r.a.createElement(I.a,{to:"/tasks/".concat(t,"?next=").concat(window.location.pathname),className:"btn btn-primary"},"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0433\u0440\u0430\u0444"))),r.a.createElement(S,{name:"tasks",data:e,manipulationActive:!1}),r.a.createElement(L,{data:e}))}}]),t}(n.Component),z=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={},e.csGraphRef=r.a.createRef(),e.tasksGraphRef=r.a.createRef(),e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"renderGraphList",value:function(e){var t=this.props.getGraphs(e);return t?t.map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}):r.a.createElement("option",{disabled:!0},"\u0412\u0456\u0434\u0441\u0443\u0442\u043d\u0456 \u0433\u0440\u0430\u0444\u0438")}},{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit,className:"p-2"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"h6",htmlFor:"queue"},"\u0410\u043b\u0433\u043e\u0440\u0438\u0442\u043c \u0444\u043e\u0440\u043c\u0443\u0432\u0430\u043d\u043d\u044f \u0447\u0435\u0440\u0433\u0438 \u0437\u0430\u0434\u0430\u0447:"),r.a.createElement("select",{name:"queue",id:"queue",value:this.props.queue,className:"form-control",onChange:this.props.handleChange},r.a.createElement("option",{value:"-1",disabled:!0},"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0447\u0435\u0440\u0433\u0443"),r.a.createElement("option",{value:"1"},"1 - \u0423 \u043f\u043e\u0440\u044f\u0434\u043a\u0443 \u0441\u043f\u0430\u0434\u0430\u043d\u043d\u044f \u043f\u0440\u043e\u043d\u043e\u0440\u043c\u043e\u0432\u0430\u043d\u043e\u0457 \u0441\u0443\u043c\u0438 \u043a\u0440\u0438\u0442\u0438\u0447\u043d\u0438\u0445 \u043f\u043e \u0447\u0430\u0441\u0443 \u0456 \u043f\u043e \u043a\u0456\u043b\u044c\u043a\u043e\u0441\u0442\u0456 \u0432\u0435\u0440\u0448\u0438\u043d \u0448\u043b\u044f\u0445\u0456\u0432 \u0434\u043e \u043a\u0456\u043d\u0446\u044f \u0433\u0440\u0430\u0444\u0430 \u0437\u0430\u0434\u0430\u0447\u0456."),r.a.createElement("option",{value:"11"},"11 - \u0423 \u043f\u043e\u0440\u044f\u0434\u043a\u0443 \u0441\u043f\u0430\u0434\u0430\u043d\u043d\u044f \u0437\u0432\u2019\u044f\u0437\u043d\u043e\u0441\u0442\u0456 \u0432\u0435\u0440\u0448\u0438\u043d, \u0430 \u043f\u0440\u0438 \u0440\u0456\u0432\u043d\u0438\u0445 \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f\u0445 \u2013 \u0432 \u043f\u043e\u0440\u044f\u0434\u043a\u0443 \u0437\u0440\u043e\u0441\u0442\u0430\u043d\u043d\u044f \u043a\u0440\u0438\u0442\u0438\u0447\u043d\u043e\u0433\u043e \u043f\u043e \u043a\u0456\u043b\u044c\u043a\u043e\u0441\u0442\u0456 \u0432\u0435\u0440\u0448\u0438\u043d \u0448\u043b\u044f\u0445\u0456\u0432 \u0432\u0456\u0434 \u043f\u043e\u0447\u0430\u0442\u043a\u0443 \u0433\u0440\u0430\u0444\u0430 \u0437\u0430\u0434\u0430\u0447\u0456."))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"h6",htmlFor:"assignmentAlgo"},"\u0410\u043b\u0433\u043e\u0440\u0438\u0442\u043c \u043f\u0440\u0438\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f:"),r.a.createElement("select",{name:"assignmentAlgo",id:"assignmentAlgo",value:this.props.assignmentAlgo,className:"form-control",onChange:this.props.handleChange},r.a.createElement("option",{value:"-1",disabled:!0},"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0430\u043b\u0433\u043e\u0440\u0438\u0442\u043c"),r.a.createElement("option",{value:"2"},"2 - \u041f\u0440\u0438\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f \u043d\u0430 \u043f\u0435\u0440\u0448\u0438\u0439 \u043f\u0440\u043e\u0446\u0435\u0441\u043e\u0440,\u0449\u043e \u0437\u0432\u0456\u043b\u044c\u043d\u0438\u0432\u0441\u044f. \u0423 \u0446\u044c\u043e\u043c\u0443 \u0432\u0438\u043f\u0430\u0434\u043a\u0443, \u043f\u0440\u0438 \u043f\u0440\u0438\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u0456, \u0437 \u0432\u0456\u043b\u044c\u043d\u0438\u0445 \u043f\u0440\u043e\u0446\u0435\u0441\u043e\u0440\u0456\u0432 \u0432\u0438\u0431\u0438\u0440\u0430\u0454\u0442\u044c\u0441\u044f \u0442\u043e\u0439, \u044f\u043a\u0438\u0439 \u0437\u0432\u0456\u043b\u044c\u043d\u0438\u0432\u0441\u044f \u0456 \u043f\u0440\u043e\u0441\u0442\u043e\u044e\u0454 \u0434\u043e\u0432\u0448\u0435 \u0437\u0430 \u0456\u043d\u0448\u0438\u0445."),r.a.createElement("option",{value:"6",disabled:!0},"6 - \u0410\u043b\u0433\u043e\u0440\u0438\u0442\u043c \xab\u0441\u0443\u0441\u0456\u0434\u043d\u044c\u043e\u0433\u043e\xbb \u043f\u0440\u0438\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f \u0437 \u0432\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u043d\u043d\u044f\u043c \u043c\u043e\u0434\u0435\u043b\u044e\u0432\u0430\u043d\u043d\u044f \u0434\u043b\u044f \u0432\u0438\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f \u043f\u043e\u0447\u0430\u0442\u043a\u043e\u0432\u043e\u0433\u043e \u0447\u0430\u0441\u0443 \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u043d\u044f \u043e\u0431\u0447\u0438\u0441\u043b\u044e\u0432\u0430\u043b\u044c\u043d\u0438\u0445 \u0440\u043e\u0431\u0456\u0442."))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"col"},r.a.createElement("label",{className:"h6",htmlFor:"tasks"},"\u0413\u0440\u0430\u0444 \u0437\u0430\u0434\u0430\u0447:"),r.a.createElement("select",{name:"tasks",id:"tasks",value:this.props.tasks,className:"form-control",onChange:this.props.handleChangeGraph},r.a.createElement("option",{value:"-1",disabled:!0},"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0433\u0440\u0430\u0444 \u0437\u0430\u0434\u0430\u0447"),this.renderGraphList("tasks")),-1!==this.props.tasks&&r.a.createElement(S,{manipulationActive:!1,height:"300px",name:"tasks",data:this.props.tasksData,ref:this.tasksGraphRef})),r.a.createElement("div",{className:"col"},r.a.createElement("label",{className:"h6",htmlFor:"cs"},"\u0413\u0440\u0430\u0444 \u0437\u0430\u0434\u0430\u0447:"),r.a.createElement("select",{value:this.props.cs,name:"cs",id:"cs",className:"form-control",onChange:this.props.handleChangeGraph},r.a.createElement("option",{value:"-1",disabled:!0},"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0433\u0440\u0430\u0444 \u043a\u043e\u043c\u043f'\u044e\u0442\u0435\u0440\u043d\u043e\u0457 \u0441\u0438\u0441\u0442\u0435\u043c\u0438"),this.renderGraphList("cs")),-1!==this.props.cs&&r.a.createElement(S,{height:"300px",manipulationActive:!1,name:"cs",data:this.props.csData,ref:this.csGraphRef}))))}}]),t}(n.Component),Q=a(42),V=a(45),Y=function(e){function t(e){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),t}(Object(V.a)(Error)),$=a(43),H=a.n($),K=1,X=2,Z=3,ee=4,te=function(){function e(t,a,n){var r=this;Object(c.a)(this,e),this._getColorArray=function(){var e={};return r.tasksData.nodes.forEach(function(t){return e[t.id]=H.a.getColor()}),e},this._formDependecies=function(){var e=r.tasksData.nodes,t=r.tasksData.edges,a={};return e.forEach(function(e){a[e.id]={parents:{},weight:e.weight}}),t.forEach(function(e){a[e.to].parents=Object(w.a)({},a[e.to].parents,Object(y.a)({},e.from,e.weight))}),Object.keys(a).forEach(function(e){0===Object.keys(a[e].parents).length&&(a[e].status=K)}),a},this._prepareProcessors=function(){var e=r.csData.nodes,t={};return e.forEach(function(e){t[e.id]=Object(w.a)({},t[e.id],{status:K,standBy:0})}),t},this._checkParent=function(e,t,a){var n=Object.keys(r.tasks[e].parents).sort(function(e,t){return r.assignmentLog[e].ended-r.assignmentLog[t].ended}).map(function(n){console.log("Tasks on processors: ".concat(JSON.stringify(r.tasksOnProcessors)));var s=r.assignmentLog[n];if(a<s.ended)return a;if(s.processorId!==t){var o=r.processors[s.processorId];o.status===ee&&(a+=o.lastTransmittion);var c=r._getPaths(parseInt(s.processorId),parseInt(t)).reduce(function(e,t){return e.length<t.length?e:t});console.log("stops from ".concat(s.processorId," to ").concat(t,": ").concat(c));var i=r.tasks[e].parents[n],l=[];c.forEach(function(t,o){if(o!==c.length-1){var u=c[o+1],m=r.processors[u],h=r.processors[t],d=h.lastTransmittion&&h.lastTransmittion>=s.ended?h.lastTransmittion:s.ended;d<h.lastTransmittion&&(d+=(Object(Q.a)("transmissionStart"),h.lastTransmittion));var p=d+i;h.status=a>=p?h.status:ee,h.transmittingTask=n,r.tasks[n].status=a>=p?Z:ee,h.endTransmissionOn=p,h.lastTransmittion=p,m.lastTransmittion=p,r.tasksOnProcessors[t].push(n),r.tasksOnProcessors[u].push(n),console.log("Sending ".concat(n,", which is an ancester of ").concat(e,", from ").concat(t," to ").concat(u,". Starting tact: ").concat(d,", end tact: ").concat(p,", ").concat(JSON.stringify(s))),r.result=Object(w.a)({},r.result,Object(y.a)({},"".concat(t,"->").concat(u," (").concat(n,"->").concat(e,")"),{values:[{x:d,y:parseFloat(t)+.25},{x:p,y:parseFloat(t)+.25}],color:r.colors[n]})),l.push(p)}});var u=Math.max.apply(Math,l);return console.log("Returning ".concat(u)),u}return a});return console.log("Tacts: ".concat(JSON.stringify(n),", max: ").concat(Math.max.apply(Math,Object(E.a)(n)))),isFinite(Math.max.apply(Math,Object(E.a)(n)))?Math.max.apply(Math,Object(E.a)(n)):a},this._executeTask=function(e,t,a){console.log("Processors: ".concat(JSON.stringify(r.processors))),a=r._checkParent(e,t,a),console.log("---\x3e Executting task ".concat(e," on processor ").concat(t)),r.assignmentLog[e]={processorId:t,ended:a+r.tasks[e].weight},r.processors[t].status=r.processors[t].status===ee?ee:X,r.processors[t].from=a,r.processors[t].to=a+r.tasks[e].weight,r.processors[t].task=e,r.tasks[e].status=X,r.queue=r.queue.filter(function(t){return t.number!==e}),r.result[e]=r.result[e]?Object(E.a)(r.result[e]):{values:[{x:a,y:parseInt(t)},{x:a+r.tasks[e].weight,y:parseInt(t)}],color:r.colors[e]}},this._getFreeProcessors=function(e){var t=Object.keys(r.processors).filter(function(t){var a=r.processors[t];return a.status===K||a.status===ee&&a.to<=e});if(0===t.length)return-1;var a=t.map(function(e){return{standBy:r.processors[e].standBy,id:e}}).sort(function(e,t){return t.standBy-e.standBy}).map(function(e){return e.id});return console.log("Prioritised queue of processors: ".concat(a)),a},this._getReadyTasks=function(){var e=r.queue.filter(function(e){var t=e.number,a=r.tasks[t];if(0===Object.keys(a.parents).length)return a.status===K;var n=[];return Object.keys(a.parents).forEach(function(e){n.push(r.tasks[e].status===Z||r.tasks[e].status===ee)}),n.every(function(e){return e})});return e=e.map(function(e){return e.number})},this._checkFinish=function(e){Object.keys(r.processors).forEach(function(t){var a=r.processors[t];a.status!==X&&a.status!==ee||a.to===e&&(console.log("Task ".concat(a.task," finished on ").concat(t)),a.status=a.status===ee?ee:K,a.standBy=0,r.tasks[a.task].status=Z)})},this._processorsStandBy=function(){Object.keys(r.processors).forEach(function(e){var t=r.processors[e];t.status!==K&&t.status!==ee||r.processors[e].standBy++})},this._checkTransmittionFinish=function(e){Object.keys(r.processors).forEach(function(t){var a=r.processors[t];a.status===ee&&a.endTransmissionOn<=e&&(a.status=a.to>=e?X:K,a.lastTransmittion=e,r.tasks[a.transmittingTask].status=Z,a.transmittingTask="-1",console.log("Ending transmittion on processor ".concat(t,"...")))})},this._canExecuteOnProcessor=function(e,t,a){return!(Object.keys(r.tasks[e].parents).length>0)||Object.keys(r.tasks[e].parents).map(function(e){var a=r.assignmentLog[e],n=a.processorId;a.ended;return n!==t?r.tasks[e].status!==ee:n!==t||r.processors[n].transmittingTask!==e}).every(function(e){return e})},this.model=function(){for(var e=0;e<50;){e++,console.log("Tact: ".concat(e)),console.log("Processors: ".concat(JSON.stringify(r.processors))),console.log("Tasks: ".concat(JSON.stringify(r.tasks))),console.log("Queue: ".concat(JSON.stringify(r.queue))),r._checkFinish(e),r._checkTransmittionFinish(e);var t=r._getReadyTasks();console.log("Ready tasks: ".concat(JSON.stringify(t)));try{if(0===t.length)throw new Y("No tasks available!");var a=!0,n=!1,s=void 0;try{for(var o,c=t[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var i=o.value,l=r._getFreeProcessors(e);if(l.length<=0)throw new Y("No free processors");var u=!0,m=!1,h=void 0;try{for(var d,p=l[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var f=d.value;if(console.log("Trying task #".concat(i," on ").concat(f,", canExecuteOnProcessor returned: ").concat(r._canExecuteOnProcessor(i,f))),r._canExecuteOnProcessor(i,f,e)){r._executeTask(i,f,e);break}}}catch(g){m=!0,h=g}finally{try{u||null==p.return||p.return()}finally{if(m)throw h}}}}catch(g){n=!0,s=g}finally{try{a||null==c.return||c.return()}finally{if(n)throw s}}}catch(v){if(!(v instanceof Y||v instanceof TypeError))throw v;console.log(v.message)}finally{r._processorsStandBy()}}return{result:r.result,tacts:e}},this.tasksData=t,this.csData=a,this.queue=n,this.tasks=this._formDependecies(),this.processors=this._prepareProcessors(),this.result={},this.assignmentLog={},this.tasksOnProcessors={},this.colors=this._getColorArray(),Object.keys(this.processors).forEach(function(e){return r.tasksOnProcessors[e]=[]})}return Object(i.a)(e,[{key:"_toEdgesArray",value:function(){var e=this.csData.edges,t=[];return e.forEach(function(e){t.push([e.from,e.to]),t.push([e.to,e.from])}),t}},{key:"_getPaths",value:function(e,t){return q({graph:this._toEdgesArray(),from:e,to:t})}}]),e}(),ae=a(19),ne=(a(73),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={},a.renderLines=function(e){return Object.keys(e).map(function(t){var a=e[t];return r.a.createElement(ae.d,{data:a.values,key:t,color:a.color,strokeWidth:3.5,animation:"nowobble",strokeDasharray:t.length>3?[7,3]:[]})})},a.renderLabels=function(e){return Object.keys(e).map(function(t){var a=e[t],n=a.values[0],s=a.values[1],o=t.length>3?n.x:n.x+(s.x-n.x)/2,c=t.length>3?n.y+.1*Math.random()+.05:n.y+.1;return r.a.createElement(ae.c,{data:[{x:o,y:c,label:t}],style:{fontSize:"8pt"},key:t,labelAnchorY:"auto","labelAnchor\u0425":"auto"})})},a.getMax=function(e){var t;return Math.max.apply(Math,Object(E.a)((t=[]).concat.apply(t,Object(E.a)(Object.values(e))).map(function(e){return e.values[1].x})))+.5},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.tasks,a=e.cs,n=e.queue;"function"===typeof t&&(t=t(),a=a());var s=new W(parseInt(n),t).run(),o=new te(t,a,s).model().result;return o?(console.log(JSON.stringify(o)),r.a.createElement(r.a.Fragment,null,r.a.createElement("h5",{className:"h5"},"\u0427\u0435\u0440\u0433\u0430 \u0437\u0430\u0434\u0430\u0447:"),r.a.createElement("div",null,Object.values(s).map(function(e){return e.number}).join(", ")),r.a.createElement(ae.a,{className:"my-4",height:600,xType:"linear",yType:"linear",xDomain:[.5,this.getMax(o)],yDomain:[-.5,Math.max.apply(Math,Object(E.a)(a.nodes.map(function(e){return e.id})))+.5]},r.a.createElement(ae.b,null),r.a.createElement(ae.e,null),r.a.createElement(ae.f,{title:"\u0422\u0430\u043a\u0442",position:"end"}),r.a.createElement(ae.g,{title:"\u041f\u0415",position:"end",tickValues:[0].concat(Object(E.a)(a.nodes.map(function(e){return e.id}))),tickFormat:function(e){return parseFloat(e).toFixed(0)}}),this.renderLines(o),this.renderLabels(o)))):r.a.createElement("div",null)}}]),t}(n.Component)),re=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={tasks:-1,cs:-1,queue:-1,assignmentAlgo:-1},a.getGraphs=function(e){var t=localStorage.getItem(e);if(t)return t=JSON.parse(t)},a.getById=function(e,t){return e.filter(function(e){return e.id===t})[0]},a.handleChange=function(e){a.setState(Object(y.a)({},e.target.name,e.target.value))},a.handleChangeGraph=function(e){var t;a.setState((t={},Object(y.a)(t,e.target.name,e.target.value),Object(y.a)(t,"".concat(e.target.name,"Data"),a.getById(a.getGraphs(e.target.name),e.target.value).data),t))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.tasks,a=e.queue,n=e.cs,s=e.assignmentAlgo,o=e.tasksData,c=e.csData;return r.a.createElement(r.a.Fragment,null,r.a.createElement(z,{handleChange:this.handleChange,handleChangeGraph:this.handleChangeGraph,tasks:t,cs:n,queue:a,assignmentAlgo:s,getGraphs:this.getGraphs,tasksData:o,csData:c}),!(-1===t||-1===n||-1===a||-1===s)&&r.a.createElement(ne,{tasks:{nodes:new O.DataSet(o.nodes),edges:new O.DataSet(o.edges)},cs:{nodes:new O.DataSet(c.nodes),edges:new O.DataSet(c.edges)},queue:a,assignmentAlgo:s}))}}]),t}(n.Component),se=function(){return r.a.createElement("div",{className:"container my-4"},r.a.createElement(v.a,null,r.a.createElement(b.a,{exact:!0,key:"home-page",path:"/",render:function(){return document.title="\u041f\u0417\u041a\u0421 - 2",r.a.createElement(J,null)}}),r.a.createElement(b.a,{key:"tasks-graphs",exact:!0,path:"/tasks",render:function(){return document.title="\u0413\u0440\u0430\u0444\u0438 \u0437\u0430\u0434\u0430\u0447 | \u041f\u0417\u041a\u0421 - 2",r.a.createElement(P,{name:"tasks",title:"\u0413\u0440\u0430\u0444\u0438 \u0437\u0430\u0434\u0430\u0447"})}}),r.a.createElement(b.a,{exact:!0,path:"/tasks/new",render:function(){return document.title="\u041d\u043e\u0432\u0438\u0439 \u0433\u0440\u0430\u0444 \u0437\u0430\u0434\u0430\u0447 | \u041f\u0417\u041a\u0421 - 2",r.a.createElement(T,{name:"tasks"})}}),r.a.createElement(b.a,{path:"/tasks/:id",exact:!0,type:"task",render:function(e){return document.title="\u0420\u0435\u0434\u0430\u043a\u0442\u043e\u0440 \u0433\u0440\u0430\u0444\u0443 \u0437\u0430\u0434\u0430\u0447 | \u041f\u0417\u041a\u0421 - 2",r.a.createElement(T,{name:"tasks",id:e.match.params.id})}}),r.a.createElement(b.a,{path:"/tasks/:id*/queue",exact:!0,type:"task",render:function(e){return document.title="\u0424\u043e\u0440\u043c\u0443\u0432\u0430\u043d\u043d\u044f \u0447\u0435\u0440\u0433\u0438 \u0437\u0430\u0434\u0430\u0447 | \u041f\u0417\u041a\u0421 - 2",r.a.createElement(U,{id:e.match.params.id})}}),r.a.createElement(b.a,{key:"cs-graphs",exact:!0,path:"/cs",render:function(){return document.title="\u0413\u0440\u0430\u0444\u0438 \u043a\u043e\u043c\u043f'\u044e\u0442\u0435\u0440\u043d\u0438\u0445 \u0441\u0438\u0441\u0442\u0435\u043c | \u041f\u0417\u041a\u0421 - 2",r.a.createElement(P,{name:"cs",title:"\u0413\u0440\u0430\u0444\u0438 \u043a\u043e\u043c\u043f'\u044e\u0442\u0435\u0440\u043d\u043e\u0457 \u0441\u0438\u0441\u0442\u0435\u043c\u0438"})}}),r.a.createElement(b.a,{exact:!0,path:"/cs/new",render:function(){return document.title="\u041d\u043e\u0432\u0438\u0439 \u0433\u0440\u0430\u0444 \u043a\u043e\u043c\u043f'\u044e\u0442\u0435\u0440\u043d\u043e\u0457 \u0441\u0438\u0441\u0442\u0435\u043c\u0438 | \u041f\u0417\u041a\u0421 - 2",r.a.createElement(T,{name:"cs"})}}),r.a.createElement(b.a,{path:"/cs/:id",type:"task",render:function(e){return document.title="\u0420\u0435\u0434\u0430\u043a\u0442\u043e\u0440 \u0433\u0440\u0430\u0444\u0443 \u043a\u043e\u043c\u043f'\u044e\u0442\u0435\u0440\u043d\u043e\u0457 \u0441\u0438\u0441\u0442\u0435\u043c\u0438 | \u041f\u0417\u041a\u0421 - 2",r.a.createElement(T,{name:"cs",id:e.match.params.id})}}),r.a.createElement(b.a,{path:"/model",exact:!0,render:function(){return document.title="\u041c\u043e\u0434\u0435\u043b\u044e\u0432\u0430\u043d\u043d\u044f | \u041f\u0417\u041a\u0421 - 2",r.a.createElement(re,null)}}),r.a.createElement(b.a,{path:"/model/test",exact:!0,render:function(){return document.title="\u041c\u043e\u0434\u0435\u043b\u044e\u0432\u0430\u043d\u043d\u044f (\u0442\u0435\u0441\u0442\u0443\u0432\u0430\u043d\u043d\u044f) | \u041f\u0417\u041a\u0421 - 2",r.a.createElement(ne,{queue:"1",assignmentAlgo:"2",tasks:function(){var e=JSON.parse(window.localStorage.getItem("tasks")),t=e.filter(function(e){return"_ewp4g4mn5"===e.id})[0].data,a=t.nodes,n=t.edges;return{nodes:a=new O.DataSet(a),edges:n=new O.DataSet(n)}},cs:function(){var e=JSON.parse(window.localStorage.getItem("cs")),t=e.filter(function(e){return"_mlog5xo8s"===e.id})[0].data,a=t.nodes,n=t.edges;return{nodes:a=new O.DataSet(a),edges:n=new O.DataSet(n)}}})}})))};a(74);d.b.add(p.b);var oe=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(h.a,{basename:"/pzks2"},r.a.createElement(r.a.Fragment,null,r.a.createElement(g,null),r.a.createElement(se,null)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(oe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[46,1,2]]]);
//# sourceMappingURL=main.b2639c4a.chunk.js.map